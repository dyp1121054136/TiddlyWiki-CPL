{"title":"$:/plugins/benwebber/twdoc","name":"twdoc","description":"Generate documentation for plugins","author":"Ben Webber","version":"0.1.0","core-version":">=5.2.4","source":"https://github.com/benwebber/tiddlywiki-plugins","plugin-type":"plugin","list":"README","license":"MIT","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/benwebber/twdoc/README\":{\"title\":\"$:/plugins/benwebber/twdoc/README\",\"text\":\"''twdoc'' makes it easy to document TiddlyWiki plugins.\\n\\n<<twdoc.list-macros \\\"[all[shadows]tag[$:/tags/Macro]prefix[$:/plugins/benwebber/twdoc/]]\\\">>\\n\"},\"$:/plugins/benwebber/twdoc/styles/static\":{\"text\":\".tw-m-0{margin:0}.tw-mb-2{margin-bottom:.5rem}.tw-hidden{display:none}.tw-border-none{border-style:none}.tw-bg-transparent{background-color:initial}.tw-p-0{padding:0}.tw-pt-2{padding-top:.5rem}.tw-pb-4{padding-bottom:1rem}.tw-font-normal{font-weight:400}.tw-font-bold{font-weight:700}.tw-italic{font-style:italic}.tw-text-inherit{color:inherit}.tw-group:hover .group-hover\\\\:tw-inline{display:inline}\",\"title\":\"$:/plugins/benwebber/twdoc/styles/static\",\"type\":\"text/css\",\"tags\":\"$:/tags/Stylesheet\"},\"$:/plugins/benwebber/twdoc/modules/filters/macros.min.js\":{\"text\":\"\\\"use strict\\\";function macros(source,_operator,_options){const output=[];const visit=(title,node)=>{if(node.isMacroDefinition){output.push({title:title,type:\\\"text/vnd.tiddlywiki\\\",name:node.attributes.name.value,params:node.params});for(const child of node.children){visit(title,child)}}};source(((tiddler,title)=>{if($tw.modules.types.macro.hasOwnProperty(title)){const exports=$tw.modules.types.macro[title].exports;output.push({title:title,type:\\\"application/javascript\\\",name:exports.name,params:exports.params})}else{const tiddler_=tiddler||$tw.wiki.getTiddler(title);if(tiddler_&&(tiddler_.fields.type===\\\"text/vnd.tiddlywiki\\\"||\\\"text/vnd.tiddlywiki\\\")){const parsed=$tw.wiki.parseTiddler(title);for(const node of parsed.tree){visit(title,node)}}}}));return output.map((m=>JSON.stringify(m)))}module.exports={\\\"twdoc.macros\\\":macros};\",\"title\":\"$:/plugins/benwebber/twdoc/modules/filters/macros.min.js\",\"type\":\"application/javascript\",\"module-type\":\"filteroperator\"},\"$:/plugins/benwebber/twdoc/macros/private\":{\"title\":\"$:/plugins/benwebber/twdoc/macros/private\",\"text\":\"\\\\define signature()\\n\\\\whitespace trim\\n<dt id=<<id>> class=\\\"twdoc-macro-signature tw-font-normal tw-group tw-mb-2\\\">\\n  <$macrocall $name=twdoc.macro name=<<name>> />\\n  (\\n  <$list filter=\\\"[enlist<indexes>]\\\" variable=i>\\n    <$list filter=\\\"[<i>compare:number:gt[0]]\\\">,&#32;</$list>\\n    <$macrocall $name=twdoc.param name={{{ [<params>jsonget<i>,[name]] }}} />\\n    <$list filter=\\\"[<params>jsonget<i>,[default]]\\\" variable=default>\\n      :\\\"<$text text={{{ [<default>search[\\\"]addprefix[\\\"\\\"]addsuffix[\\\"\\\"]else<default>] }}} />\\\"\\n    </$list>\\n  </$list>\\n  )\\n  <a class=\\\"tw-hidden group-hover:tw-inline\\\" href={{{ [<id>addprefix[#]] }}} title=\\\"Permalink to $(name)$\\\">{{$:/core/images/permalink-button}}</a>\\n</dt>\\n\\\\end\\n\\n\\\\define includesName() [subfilter<__names__>] :intersection[<currentTiddler>]\\n\\\\define maybeOptional()\\n[<default>!is[blank]]\\n[<tiddlerOptional>regexp[(?i)^(true|yes)$]]\\n[<macroOptional>regexp[(?i)^(true|yes)$]]\\n+[first[]]\\n\\\\end\\n\\\\define isNotRequired()\\n[<tiddlerOptional>!regexp[(?i)^(false|no)$]]\\n[<macroOptional>!regexp[(?i)^(false|no)$]]\\n+[first[]]\\n\\\\end\\n\"},\"$:/plugins/benwebber/twdoc/macros/public/ext\":{\"title\":\"$:/plugins/benwebber/twdoc/macros/public/ext\",\"tags\":\"$:/tags/Macro\",\"twdoc.description\":\"Render a link to an external wiki, usually the official TiddlyWiki documentation.\",\"twdoc.param.tiddler\":\"The title of a tiddler in the external wiki.\",\"twdoc.param.text\":\"The link text. If not specified, use <<twdoc.param title>>.\",\"twdoc.param.text.optional\":\"true\",\"twdoc.param.url\":\"The base URL of the wiki.\",\"twdoc.param.class\":\"A class name to add to the link.\",\"twdoc.param.class.optional\":\"true\",\"text\":\"\\\\define twdoc.ext(tiddler, text, url:\\\"https://tiddlywiki.com/\\\", class)\\n\\\\whitespace trim\\n<$let\\n  url={{{ [<__url__>trim:suffix[/]addsuffix[/#]addsuffix<__tiddler__>] }}}\\n  text={{{ [<__text__>!is[blank]else<__tiddler__>] }}}\\n  class={{{ [<__class__>] twdoc twdoc-ext +[!is[blank]join[ ]] }}}\\n>\\n  <a href=<<url>> rel=\\\"noopener noreferer\\\"><<text>></a>\\n</$let>\\n\\\\end\\n\"},\"$:/plugins/benwebber/twdoc/macros/public/list-macros\":{\"title\":\"$:/plugins/benwebber/twdoc/macros/public/list-macros\",\"tags\":\"$:/tags/Macro\",\"twdoc.description\":\"Render documentation for a set of macros. Supports WikiText and JavaScript macros.\",\"twdoc.param.filter\":\"A <<twdoc.ext \\\"Filters\\\" \\\"filter\\\">> selecting which tiddlers to search for macro definitions.\",\"twdoc.param.names\":\"A <<twdoc.ext \\\"Filters\\\" \\\"filter\\\">> matching macro names. If not specified, render all macros found in the tiddlers matched by <<twdoc.param filter>>.\",\"twdoc.param.names.optional\":\"true\",\"twdoc.param.class\":\"A class name to add to the macro list.\",\"twdoc.param.class.optional\":\"true\",\"text\":\"\\\\define twdoc.list-macros(filter, names, class)\\n<dl class={{{ [<__class__>] twdoc twdoc-macros tw-m-0 +[!is[blank]join[ ]] }}}>\\n  <$list filter=\\\"\\\"\\\"$filter$ +[twdoc.macros[]]\\\"\\\"\\\" variable=macro>\\n    <$transclude tiddler=\\\"$:/plugins/benwebber/twdoc/templates/macro\\\" />\\n  </$list>\\n</dl>\\n\\\\end\\n\"},\"$:/plugins/benwebber/twdoc/macros/public/macro\":{\"title\":\"$:/plugins/benwebber/twdoc/macros/public/macro\",\"tags\":\"$:/tags/Macro\",\"twdoc.description\":\"Render a macro name. Use this to reference macros in documentation.\",\"twdoc.param.name\":\"The macro name.\",\"twdoc.param.class\":\"A class name to add to the `<code>` tag.\",\"twdoc.param.class.optional\":\"true\",\"text\":\"\\\\define twdoc.macro(name, class)\\n\\\\whitespace trim\\n<$let class={{{ [<__class__>] twdoc twdoc-macro tw-bg-transparent tw-border-none tw-font-bold tw-p-0 +[!is[blank]join[ ]] }}}>\\n  <code class=<<class>>>$name$</code>\\n</$let>\\n\\\\end\\n\"},\"$:/plugins/benwebber/twdoc/macros/public/param\":{\"title\":\"$:/plugins/benwebber/twdoc/macros/public/param\",\"tags\":\"$:/tags/Macro\",\"twdoc.description\":\"Render a macro parameter. Use this to reference parameters in documentation.\",\"twdoc.param.name\":\"The parameter name.\",\"twdoc.param.class\":\"A class name to add to the `<code>` tag.\",\"twdoc.param.class.optional\":\"true\",\"text\":\"\\\\define twdoc.param(name, class)\\n\\\\whitespace trim\\n<$let class={{{ [<__class__>] twdoc twdoc-param tw-bg-transparent tw-border-none tw-font-normal tw-italic tw-p-0 tw-text-inherit +[!is[blank]join[ ]] }}}>\\n  <code class=<<class>>>$name$</code>\\n</$let>\\n\\\\end\\n\"},\"$:/plugins/benwebber/twdoc/styles/dynamic\":{\"title\":\"$:/plugins/benwebber/twdoc/styles/dynamic\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\".twdoc-macros > * + * {\\n  border-color: <<colour \\\"table-border\\\">>;\\n  border-style: solid;\\n  border-width: 0;\\n  border-top-width: 1px;\\n}\\n\\n.twdoc-macros > *:first-child {\\n  padding-top: 0;\\n}\\n\\n.twdoc-macro-signature {\\n  font-family: {{$:/themes/tiddlywiki/vanilla/settings/codefontfamily}};\\n}\\n\\n.twdoc-macro {\\n  color: <<colour \\\"code-foreground\\\">>;\\n}\\n\\n.twdoc-macro-signature svg {\\n  fill: <<colour \\\"muted-foreground\\\">>;\\n}\\n\\n.twdoc-macro-signature a:hover svg {\\n  fill: <<colour \\\"foreground\\\">>;\\n}\\n\\n.twdoc-macro-signature svg {\\n  height: 1rem;\\n  margin: 0;\\n  vertical-align: middle;\\n  width: 1rem;\\n}\\n\"},\"$:/plugins/benwebber/twdoc/templates/macro\":{\"title\":\"$:/plugins/benwebber/twdoc/templates/macro\",\"text\":\"\\\\import [[$:/plugins/benwebber/twdoc/macros/private]]\\n<$tiddler tiddler={{{ [<macro>jsonget[title]] }}}>\\n  <$let name={{{ [<macro>jsonget[name]] }}}>\\n    <$qualify title={{{ [<name>addprefix[#]] }}} name=id>\\n      <$list filter=\\\"[<__names__>is[blank]] [<name>filter<includesName>]\\\" variable=_>\\n        <$let\\n          params={{{ [<macro>jsonextract[params]] }}}\\n          indexes={{{ [<params>jsonindexes[]join[ ]] }}}\\n        >\\n          <div class=\\\"tw-pt-2 tw-pb-4\\\">\\n            <<signature>>\\n            <dd class=\\\"tw-m-0\\\">\\n              <$transclude field={{{ twdoc [<name>] description +[join[.]] }}}>\\n                <$transclude field=twdoc.description />\\n              </$transclude>\\n              <dl>\\n                <$list filter=\\\"[enlist<indexes>]\\\" variable=i>\\n                  <$let\\n                    param={{{ [<params>jsonget<i>,[name]] }}}\\n                    default={{{ [<params>jsonget<i>,[default]] }}}\\n                    macroOptionalField={{{ twdoc [<name>] param [<param>] optional +[join[.]] }}}\\n                    tiddlerOptionalField={{{ twdoc param [<param>] optional +[join[.]] }}}\\n                    macroOptional={{{ [<currentTiddler>get<macroOptionalField>] }}}\\n                    tiddlerOptional={{{ [<currentTiddler>get<tiddlerOptionalField>] }}}\\n                  >\\n                    <dt class=\\\"tw-font-normal\\\"><$macrocall $name=twdoc.param name=<<param>> class=\\\"tw-font-bold\\\" /><$list filter=<<maybeOptional>>><$list filter=<<isNotRequired>>> (optional)</$list></$list></dt>\\n                    <dd>\\n                      <$transclude field={{{ twdoc [<name>] param [<param>] +[join[.]] }}}>\\n                        <$transclude field={{{ twdoc.param [<param>] +[join[.]] }}} />\\n                      </$transclude>\\n                    </dd>\\n                  </$let>\\n                </$list>\\n              </dl>\\n            </dd>\\n          </div>\\n        </$let>\\n      </$list>\\n    </$qualify>\\n  </$let>\\n</$tiddler>\\n\"}}}"}