{"title":"$:/plugins/oeyoews/neotw-gli","description":"Neotw Gli","author":"oeyoews","version":"0.0.1","core-version":">=5.2.5","type":"application/json","plugin-type":"plugin","name":"Neotw Gli","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme explore","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-gli/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-gli/readme\",\"text\":\"!! Neotw Gli\\n\"},\"$:/plugins/oeyoews/neotw-gli/icon\":{\"title\":\"$:/plugins/oeyoews/neotw-gli/icon\",\"text\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"1em\\\" height=\\\"1em\\\" fill=\\\"#aaa\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"0\\\" version=\\\"1\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#8BC34A\\\" stroke=\\\"none\\\" d=\\\"M39 15c0-2.2-1.8-4-4-4h-6c-.7 0-1.1-.8-.7-1.4.6-1 .9-2.2.6-3.5-.4-2-1.9-3.6-3.8-4C21.8 1.4 19 3.9 19 7c0 1 .3 1.8.7 2.6.4.6 0 1.4-.8 1.4h-6c-2.2 0-4 1.8-4 4v7c0 .7.8 1.1 1.4.7 1-.6 2.2-.9 3.5-.6 2 .4 3.6 1.9 4 3.8.7 3.2-1.8 6.1-4.9 6.1-1 0-1.8-.3-2.6-.7-.5-.4-1.3 0-1.3.7v6c0 2.2 1.8 4 4 4h22c2.2 0 4-1.8 4-4V15z\\\"/></svg>\",\"type\":\"image/svg+xml\"},\"$:/plugins/oeyoews/neotw-gli/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-gli/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-gli/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-gli widget\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  // adjuge this environment to the widget\\n  if (!$tw.browser) return;\\n\\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\\n  class GLIWidget extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n    }\\n\\n    /**\\n     * Asynchronously renders the HTML of the component in the provided parent element before the nextSibling.\\n     *\\n     * @param {HTMLElement} parent - The parent element to append the rendered HTML to.\\n     * @param {HTMLElement} nextSibling - The element before which the rendered HTML will be inserted.\\n     */\\n\\n    /**\\n     * 异步地在提供的父元素中在 nextSibling 前渲染组件的 HTML。\\n     *\\n     * @param {HTMLElement} parent - 要将渲染的 HTML 附加到的父元素。\\n     * @param {HTMLElement} nextSibling - 要插入渲染的 HTML 的元素之前的元素。\\n     */\\n    async render(parent, nextSibling) {\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      const url =\\n        'https://api.github.com/repos/oeyoews/neotw/commits?per_page=1';\\n\\n      const gliNode = this.document.createElement('div');\\n      gliNode.textContent = 'Loading ...'; // 显示loading\\n\\n      try {\\n        const response = await fetch(url);\\n        const data = await response.json();\\n\\n        // 提取最后一次提交的时间戳\\n        const timestamp = new Date(data[0].commit.author.date).getTime();\\n        // 格式化时间戳为字符串\\n        const timeStr = new Date(timestamp).toLocaleString();\\n        gliNode.textContent = `Last commit: ${timeStr}`; // 显示时间字符串\\n      } catch (error) {\\n        console.error(error);\\n        // gliNode.classList.add('font-bold', 'text-red-500');\\n        // const apiLimitMessage = 'API rate limit exceeded 😭';\\n        // gliNode.textContent = 'Error loading data; ' + apiLimitMessage; // 显示错误信息\\n        return;\\n      }\\n\\n      parent.insertBefore(gliNode, nextSibling);\\n      this.domNodes.push(gliNode);\\n    }\\n  }\\n\\n  exports.gli = GLIWidget;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}