{"title":"$:/plugins/xp/aggregation","author":"kl","name":"Aggregation","description":"Aggregation View","readme":"\\define annot(text) <small><i class=\"tc-muted\">-- $text$</i></small>\n\n\\define aggregationTopics()\n$:/plugins/xp/aggregation-aphorism\n$:/plugins/xp/aggregation-bookshelf\n$:/plugins/xp/aggregation-checklist\n$:/plugins/xp/aggregation-consumer\n$:/plugins/xp/aggregation-courses\n$:/plugins/xp/aggregation-enterprises\n$:/plugins/xp/aggregation-gtd\n$:/plugins/xp/aggregation-howtos\n$:/plugins/xp/aggregation-knowledge-system\n$:/plugins/xp/aggregation-people\n$:/plugins/xp/aggregation-plugins\n$:/plugins/xp/aggregation-snippets\n$:/plugins/xp/aggregation-software\n$:/plugins/xp/aggregation-whys\n\\end\n\n\\define aggrExample(tag,topic)\n\\import $:/aggregation/macros\n\\define aggregationTag() $tag$\n\\define config-base() $:/config/xp/aggregation-$topic$/TableFields/Visibility/\n\n<$wikify name=\"dtableFields\" text=\"\"\"<$list filter=\"[list[$:/config/xp/aggregation-$topic$/TableFields]]\" variable=\"listField\"><$reveal type=\"match\" state=<<config-title>> text=\"show\"> <$text text={{{ [<listField>format:titlelist[]] }}}/> </$reveal></$list>\"\"\">\n<$macrocall\n  $name=\"aggregation-filtersearch\"\n  fields=<<dtableFields>>\n  state=\"$topic$\"\n  class=\"\"\n  cardTemplate=\"\"\n  searchClass=\"xp-search-$topic$\"\n  promptTiddler=\"\"\n/>\n</$wikify>\n\\end\n\n\n!! Aggregation\n\n聚合或者聚合视图（Aggregation View），是一种浏览和管理条目的视图。在聚合视图中，你可以「搜索」「过滤」「排序」「阅读」「编辑」「导出」「删除」条目。\n\n聚合视图旨在整合 [[高级搜索|$:/core/ui/AdvancedSearch/Filter]] / [[动态表格|$:/plugins/kookma/shiraz]] / [[目录宏|$:/core/macros/toc]] / [[条目管理器|$:/Manager]]，提供一个更实用更强大的条目浏览器：$:/FilterSearch。（[[聚合视图使用说明|$:/aggregation/instructions]]）\n\n该插件提供以下几个功能：\n\n# 通过 [[聚合视图按钮|$:/xp/ui/Buttons/aggregation-view]] 查看一个主题的聚合视图。（当前条目含有子条目或者是插件，则打开聚合视图。）\n# 通过 [[创建按钮|$:/aggregation/QuickCreate]] 创建一个聚合视图。将一个大的主题进行内容聚合。\n# 通过 [[子条目按钮|$:/xp/ui/Buttons/view-subtiddler]] 在侧边栏中查看子条目。\n# 通过 [[Tag Handler|$:/xp/ui/ViewTemplate/tag-handler]] 管理 [[分类标签|$:/分类标签与分类标签栏]]。\n# 通过 [[Show Caption|$:/aggregation/ShowCaption]] 设置在故事河中显示 Caption 的条目。\n# 通过 [[Filter Builder|$:/FilterBuilder]] 快速构建一个筛选表达式。（[[Help|$:/FilterBuilder/Help]]）\n\nIt overrides the following ''core'' tiddlers:\n\n<<list-links filter:\"$:/core/ui/TagTemplate $:/tags/FieldEditorFilter $:/tags/StoryTiddlerTemplateFilter $:/tags/ViewTemplateTitleFilter\" type:\"ol\">>\n\nDependents:\n\n# $:/plugins/kookma/shiraz <<annot \"动态表格视图。详细教程见 [[Tutorial Dynamic Tables|https://kookma.github.io/TW-Shiraz/#Tutorial%20Dynamic%20Tables]]\">>\n# $:/plugins/ihm/tidgraph <<annot 进度列表>>\n# $:/plugins/TWaddle/ListTree <<annot （非必需）改变项目列表的样式>>\n\n\n!! Aggregation Topic\n\n以下为特色聚合主题，选择自己需要的进行安装：\n\n<ol>\n<$list filter=\"[enlist<aggregationTopics>sort[]]\" variable=\"listItem\">\n<$list filter=\"[<listItem>!is[missing]has[plugin-type]type[application/json]]\" variable=\"ignore\">\n<li>\n<$link to=<<listItem>>><$view tiddler=<<listItem>> field=\"name\"/></$link>\n<$list filter=\"[<listItem>has[description]]\" variable=\"ignore\">\n<i class=\"tc-muted\">-- <$transclude tiddler=<<listItem>> field=\"description\"/></i>\n</$list>\n</li>\n</$list>\n<$list filter=\"[<listItem>is[missing]]\" variable=\"ignore\">\n<li>\n<$link to=<<listItem>>><$view tiddler=<<listItem>> field=\"title\"/></$link>\n</li>\n</$list>\n</$list>\n</ol>\n\n> 尚未制作的聚合主题 $:/plugins/xp/aggregation-cash <i class=\"tc-muted\">-- Record the hand account</i>\n\n!! Create a Topic Aggregation\n\n<$tiddler tiddler=\"$:/temp/xp/aggregation/create\">\n<$radio field=\"text\" value=\"1\" default=\"1\"> 一键创建 </$radio>&ensp;\n<$radio field=\"text\" value=\"0\"> 示范教程 </$radio>\n</$tiddler>\n\n<$reveal state=\"$:/temp/xp/aggregation/create\" type=\"match\" text=\"1\" default=\"1\" animate=\"yes\">\n{{$:/aggregation/QuickCreate}}\n\n<div class=\"tc-muted\">//你应该先参照「示范教程」操作一遍，再使用通用模板「一键创建」。//</div>\n\n</$reveal>\n\n<$reveal state=\"$:/temp/xp/aggregation/create\" type=\"match\" text=\"0\" animate=\"yes\">\n\n; 参照 [[PEOPLE|$:/plugins/xp/aggregation-people]]，创建一个 Topic 为 English 的内容聚合。\n\n创建条目 [[ENGLISH]]，将下面的代码拷贝进去：\n\n<$macrocall $name=\"copy-to-clipboard\" src=<<aggrExample tag:\"People\" topic:\"people\">> />\n<$codeblock code=<<aggrExample tag:\"People\" topic:\"people\">> language=\"js\"/>\n\n修改聚合标签，并将其他地方的 `people` 修改为 `english`：<div>\n\n<$codeblock code=<<aggrExample tag:\"English\" topic:\"english\">> language=\"js\"/>\n\n宏参数 `state` 的值必须唯一。该值不仅作为动态表格的标识，也作为聚合视图的唯一标识，以确保每个聚合视图独立运行。创建唯一 ID 的方法有：\n\n# 使用条目标题；如果一个条目中含有多个表格，则加上数字编号 `title/<number>`；\n# 使用时间戳 `<<now \"YYYY0MM0DD0hh0mm0ssXXX\">>`。\n\n</div>\n\n保存 [[ENGLISH]]。然后，新建配置文件：\n\n* $:/config/xp/aggregation-english/TableFields 存放动态表格默认显示的字段，将 `text` `list` 字段值设为：<div>\n\n```\ntbl-expand title description tags\n```\n</div>\n\n* $:/config/xp/aggregation-english/category/ctags 存放预设置的分类标签，将 `text` 设为：<div>\n\n```\n语法 听力 口语 单词 写作 你的其他分类标签\n```\n</div>\n\n就这样，一个主题聚合就创建完毕了。给条目打上聚合标签 `English` 后，内容就会出现在 [[ENGLISH]] 中。\n\n上面只是示范教程，现在我们可以删除 [[ENGLISH]] 条目。然后，切换到「一键创建」输入 `english`（不区分大小写）进行快速创建。\n\n</$reveal>\n","version":"0.5.1","plugin-type":"plugin","dependents":"$:/plugins/kookma/shiraz $:/plugins/ihm/tidgraph $:/plugins/TWaddle/ListTree","core-version":">=5.3.0","requires-reload":false,"category":"Unknown","type":"application/json","latest":"0.5.1","versions":["0.5.0","0.5.1"],"versions-size":{"0.5.0":465636,"0.5.1":487295}}