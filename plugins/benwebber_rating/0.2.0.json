{"title":"$:/plugins/benwebber/rating","name":"rating","description":"Add simple star ratings to tiddlers","author":"Ben Webber","version":"0.2.0","core-version":">=5.2.1","source":"https://github.com/benwebber/tiddlywiki-plugins","plugin-type":"plugin","list":"README","license":"MIT","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/benwebber/rating/README\":{\"title\":\"$:/plugins/benwebber/rating/README\",\"text\":\"''rating'' adds a macro to render simple star ratings.\\n\\n<$list filter=\\\"[variables[]match[twdoc.list-macros]]\\\" emptyMessage=\\\"Install [ext[twdoc|https://benwebber.github.io/tiddlywiki-plugins/#twdoc]] to view documentation.\\\">\\n<<twdoc.list-macros \\\"[all[shadows]tag[$:/tags/Macro]prefix[$:/plugins/benwebber/rating/]]\\\">>\\n</$list>\\n\"},\"$:/plugins/benwebber/rating/config/DefaultField\":{\"title\":\"$:/plugins/benwebber/rating/config/DefaultField\",\"text\":\"rating\"},\"$:/plugins/benwebber/rating/styles/static\":{\"text\":\".tw-sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.tw-m-0{margin:0}.tw-ml-2{margin-left:.5rem}.tw-mt-px{margin-top:1px}.tw-flex{display:flex}.tw-hidden{display:none}.tw-h-\\\\[0\\\\.8rem\\\\]{height:.8rem}.tw-w-\\\\[0\\\\.8rem\\\\]{width:.8rem}.tw-list-none{list-style-type:none}.tw-p-0{padding:0}.tw-pl-0\\\\.5{padding-left:.125rem}.tw-pl-0{padding-left:0}.rating input{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:1rem;-webkit-mask-image:var(--mask-image);mask-image:var(--mask-image);-webkit-mask-size:contain;mask-size:contain;width:1rem}.rating input:disabled{cursor:default}.rating.rating-disabled .rating-cancel{display:none!important}.first-of-type\\\\:tw-p-0:first-of-type{padding:0}.tw-group:focus-within .group-focus-within\\\\:tw-block,.tw-group:hover .group-hover\\\\:tw-block{display:block}\",\"title\":\"$:/plugins/benwebber/rating/styles/static\",\"type\":\"text/css\",\"tags\":\"$:/tags/Stylesheet\"},\"$:/plugins/benwebber/rating/macros/private\":{\"title\":\"$:/plugins/benwebber/rating/macros/private\",\"text\":\"\\\\define clear()\\n<$action-deletefield $tiddler=<<tiddler>> $field=<<field>> />\\n\\\\end\\n\\n<!-- https://www.telumire.be/TiddlyTweaks/#Trick%20to%20convert%20the%20core%20images%20to%20SVG%20image -->\\n\\\\define svgTiddlerDataURI() <$text text={{{[[data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"]][[ width=\\\"22pt\\\" height=\\\"22pt\\\">]][title<__icon__>get[text]][[</svg>]]+[join[]]}}} />\\n\"},\"$:/plugins/benwebber/rating/macros/public\":{\"title\":\"$:/plugins/benwebber/rating/macros/public\",\"tags\":\"$:/tags/Macro\",\"twdoc.description\":\"Render a star rating\",\"twdoc.param.tiddler\":\"Optional title of the tiddler to modify. The default is the <<twdoc.ext \\\"Current Tiddler\\\" \\\"current tiddler\\\">>.\",\"twdoc.param.field\":\"Field that will store the rating. The default is <code>{{$:/plugins/benwebber/rating/config/DefaultField}}</code>.\",\"twdoc.param.field.optional\":\"true\",\"twdoc.param.min\":\"Minimum rating (positive integer).\",\"twdoc.param.max\":\"Maximum rating (positive integer).\",\"twdoc.param.icon\":\"An SVG to use as a mask. Supports embedded SVG elements (e.g., <<twdoc.ext \\\"Icon Gallery\\\" \\\"core images\\\">>) as well as <<twdoc.ext \\\"Using SVG\\\" \\\"SVG document tiddlers\\\">>.\",\"twdoc.param.disabled\":\"If `yes`, render a read-only version of the component.\",\"text\":\"\\\\define rating(tiddler, field, min: \\\"1\\\", max: \\\"5\\\", icon: \\\"$:/core/images/star-filled\\\", disabled: \\\"no\\\")\\n\\\\import [[$:/plugins/benwebber/rating/macros/private]]\\n<$let\\n  tiddler={{{ [<__tiddler__>is[blank]then<currentTiddler>else<__tiddler__>] }}}\\n  defaultField={{$:/plugins/benwebber/rating/config/DefaultField}}\\n  field={{{ [<__field__>is[blank]then<defaultField>else<__field__>] }}}\\n  svgImageDataURI=<<datauri \\\"\\\"\\\"$icon$\\\"\\\"\\\">>\\n  dataURI={{{ [title<__icon__>field:type[image/svg+xml]then<svgImageDataURI>else<svgTiddlerDataURI>] }}}\\n>\\n<$wikify name=style text=\\\"\\\"\\\"`--`mask-image:url('<<dataURI>>');\\\"\\\"\\\">\\n<div class={{{ tw-flex tw-group rating [<__disabled__>match:caseinsensitive[yes]then[rating-disabled]] +[join[ ]] }}} style=<<style>>>\\n  <ul class=\\\"rating-list tw-flex tw-m-0 tw-p-0\\\">\\n    <$list filter=\\\"[range<__min__>,<__max__>]\\\" variable=\\\"i\\\">\\n      <li class={{{ tw-list-none first-of-type:tw-p-0 tw-pl-0.5 rating-list-item [title<tiddler>get<field>compare:number:gteq<i>then[rating-list-item-selected]] +[join[ ]] }}}>\\n        <$radio field=<<field>> value=<<i>> disabled=<<__disabled__>>><span class=\\\"tw-sr-only\\\"><<i>></span></$radio>\\n      </li>\\n    </$list>\\n  </ul>\\n  <$button class=\\\"tc-btn-invisible tw-hidden tw-h-[0.8rem] tw-ml-2 tw-mt-px tw-w-[0.8rem] group-hover:tw-block group-focus-within:tw-block rating-cancel\\\" tooltip=\\\"Clear\\\" aria-label=\\\"Clear\\\" actions=<<clear>>>\\n    {{$:/core/images/close-button}}\\n  </$button>\\n</div>\\n</$wikify>\\n</$let>\\n\\\\end\\n\"},\"$:/plugins/benwebber/rating/styles/dynamic\":{\"title\":\"$:/plugins/benwebber/rating/styles/dynamic\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\".rating .rating-list-item input {\\n  background: <<colour muted-foreground>>;\\n}\\n\\n.rating .rating-list-item-selected input {\\n  background: <<colour foreground>>;\\n}\\n\\n.rating .rating-list-item-selected:last-child ~ .rating-list-item input {\\n  background: <<colour muted-foreground>>;\\n}\\n\\n.rating .rating-list:hover .rating-list-item input:not(:disabled),\\n.rating .rating-list:focus-within .rating-list-item input:not(:disabled) {\\n  background: <<colour foreground>>;\\n}\\n\\n.rating .rating-list-item:hover ~ .rating-list-item input:not(:disabled),\\n.rating .rating-list-item:focus-within ~ .rating-list-item input:not(:disabled) {\\n  background: <<colour muted-foreground>>;\\n}\\n\\n.rating .rating-list:focus-within  .rating-list-item input:not(:disabled):focus-visible {\\n  background: <<colour primary>>;\\n}\\n\\n.rating .rating-cancel {\\n  fill: <<colour muted-foreground>>;\\n}\\n\\n.rating:hover .rating-cancel:hover {\\n  fill: <<colour foreground>>;\\n}\\n\"}}}"}