{"title":"$:/plugins/oeyoews/notebook-theme-sidebar-resizer","description":"notebook-theme-sidebar-resizer","author":"oeyoews","version":"0.2.7","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"notebook theme sidebar resizer","meat#disabled":"yes","qrcode":"yes","created":"2023-12-19","list":"readme","dependents":"","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/readme\":{\"title\":\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/readme\",\"text\":\"!! Notebook theme sidebar resizer\\n\\n> support left/right sidebar resizer\\n\\n> 最初仅仅是为了支持 notebook theme 而写的 sidebar resizer, 后来开始支持 vanilla(and based vanilla sidebar theme), captivate, whitespace 等主题.\\n\\n<!-- 在切换主题时，theme 会覆盖掉同名非系统文件，所以需要手动修改 -->\\n\\n!! For captivate theme\\n\\nneed add `<$nbresizer />` in [[$:/themes/cdr/captivate/ui/SideBar]] tiddler.\\n\\n```html\\n<<sidebarTabs>>\\n<!-- here -->\\n<$nbresizer />\\n```\\n\\n!! For Whitespace theme\\n\\n> whitespace theme for two 5.1.17 and 5.1.22 version, if use latest version, maybe have some ui problems.\\n\\nneed add `<$nbresizer />` in [[$:/themes/jd/Whitespace/template/sidebar]] tiddler.\\n\\n```html\\n<!-- add resizer widget here  -->\\n\\n<$transclude/>\\n<$nbresizer />\\n```\\n\\n> 如果你在不同的主题切换, 你会发现一些 UI 上的异常, 那是因为 这个 tiddler 被修改后变成了 shadow tiddler, 在所有的主题下都会起作用.\\n\\n!! Recipes\\n\\n* 之所以部分主题需要手动修改 tiddler, 是因为他们的 sidebar 模板是写死的, 无法通过动态嵌入 tiddler. 这一点建议 学习 notebook theme\"},\"$:/themes/nico/notebook/ui/Sidebar/resizer\":{\"title\":\"$:/themes/nico/notebook/ui/Sidebar/resizer\",\"tags\":\"$:/themes/nico/notebook/tags/Sidebar $:/tags/SideBarSegment\",\"text\":\"<$nbresizer />\"},\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/default-sidebar-width\":{\"title\":\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/default-sidebar-width\",\"text\":\"300px\"},\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/locales/en.js\":{\"title\":\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/locales/en.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/notebook-theme-sidebar-resizer/locales/en.js\\ntype: application/javascript\\nmodule-type: library\\n\\nnotebook-theme-sidebar-resizer locale en\\n\\\\*/\\nmodule.exports={pluginname:\\\"notebook-theme-sidebar-resizer\\\",warning:\\\"[notebook-theme-sidebar-resizer]: requires the 'tiddlywiki/tailwindcss-plus' plugin to be installed\\\"};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/locales/zh.js\":{\"title\":\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/locales/zh.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/notebook-theme-sidebar-resizer/locales/zh.js\\ntype: application/javascript\\nmodule-type: library\\n\\nnotebook-theme-sidebar-resizer locale zh\\n\\\\*/\\nmodule.exports={pluginname:\\\"侧边栏宽度调整插件\\\",warning:\\\"需要安装 tailwindcss\\\"};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/style.css\":{\"title\":\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/style.css\",\"text\":\".oresizer-left {\\n  left: 0;\\n}\\n.oresizer-right {\\n  right: 0;\\n}\\n\\n.oresizer {\\n  width: 5px;\\n  border-radius: 5px;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  background-color: #f3f4f6;\\n}\\n\\n.oresizer:hover {\\n  cursor: e-resize;\\n  background-color: #e5e7eb;\\n  transition: all;\\n}\\n\\n.dark .oresizer {\\n  background-color: #6b7280;\\n}\\n.dark .oresizer:hover {\\n  background-color: #4b5563;\\n}\\n\",\"type\":\"text/css\",\"tags\":\"$:/tags/Stylesheet\"},\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/widget.js\":{\"title\":\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/notebook-theme-sidebar-resizer/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nnotebook-theme-sidebar-resizer widget\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\"),t=require(\\\"./locales/en\\\");exports.nbresizer=class extends e{constructor(e,t){super(e,t),this.VANILLA=\\\"vanilla\\\",this.NOTEBOOK=\\\"notebook\\\",this.LEFT=\\\"left\\\",this.RIGHT=\\\"right\\\",this.defaultWidthTiddler=\\\"$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth\\\",this.nbWidthTiddler=\\\"$:/plugins/oeyoews/notebook-theme-sidebar-resizer/default-sidebar-width\\\",this.themeTiddler=\\\"$:/theme\\\",this.theme=null,this.isResizing=!1,this.width=0,this.defaultStateTiddler=\\\"$:/state/sidebar\\\",this.notebook={name:\\\"NOTEBOOK\\\",theme:[\\\"$:/themes/nico/notebook\\\",\\\"$:/themes/oeyoews/notebook-plus\\\"],stateTiddler:\\\"$:/state/notebook-sidebar\\\",widthTiddler:\\\"$:/themes/nico/notebook/metrics/sidebar-width\\\",positionTiddler:\\\"$:/themes/nico/notebook/metrics/sidebar-position\\\"},this.whitespace={name:\\\"WHITESPACE\\\",theme:\\\"$:/themes/jd/Whitespace\\\",positionTiddler:\\\"$:/config/Whitespace/sidebar\\\",widthTiddler:this.defaultWidthTiddler},this.sidebarLayoutTiddler=\\\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\\\",this.listenTiddlers=[this.notebook.positionTiddler,\\\"$:/language\\\",\\\"$:/layout\\\",this.themeTiddler,this.whitespace.positionTiddler,this.sidebarLayoutTiddler]}render(e,t){if(!$tw.browser)return;this.parentDomNode=e,this.computeAttributes(),this.execute();const i=$tw.utils.domMaker,s=this.checkTheme();this.theme=s,this.presetForVanillaTheme();const d=i(\\\"div\\\",{class:\\\"oresizer\\\"});this.getSidebarPosition()===this.LEFT?d.classList.add(\\\"oresizer-right\\\"):d.classList.add(\\\"oresizer-left\\\"),d.addEventListener(\\\"pointerdown\\\",(e=>{e.preventDefault(),this.isResizing=!0,document.addEventListener(\\\"pointermove\\\",(e=>this.resize(e))),document.addEventListener(\\\"pointerup\\\",(e=>this.stopResize(e)))})),e.insertBefore(d,t),this.domNodes.push(d)}checkTheme(){const e=this.getText(this.themeTiddler);return this.notebook.theme.includes(e)?this.notebook.name:e===this.whitespace.theme?this.whitespace.name:this.VANILLA}presetForVanillaTheme(){const e=this.getText(this.sidebarLayoutTiddler);this.theme===this.VANILLA&&\\\"fluid-fixed\\\"!==e&&(console.warn(\\\"you should set sidebar layout to fluid-fixed\\\"),$tw.wiki.setText(this.sidebarLayoutTiddler,null,null,\\\"fluid-fixed\\\"))}getText(e){return $tw.wiki.getTiddlerText(e)}getSidebarPosition(){if(\\\"$:/themes/cdr/captivate\\\"===this.getText(this.themeTiddler))return this.LEFT;switch(this.theme){case this.whitespace.name:return $tw.wiki.tiddlerExists(this.whitespace.positionTiddler)?this.getText(this.whitespace.positionTiddler):this.LEFT;case this.notebook.name:if(!$tw.wiki.tiddlerExists(this.notebook.positionTiddler))return this.LEFT;const{position:e=this.LEFT}=$tw.wiki.getTiddler(this.notebook.positionTiddler).fields;return e;default:return this.RIGHT}}getDefaultSidebarWidth(){return this.getText(this.nbWidthTiddler).replace(\\\"px\\\",\\\"\\\")}resize(e){const t=e.clientX;if(this.isResizing){if(this.getSidebarPosition()===this.LEFT?this.width=t:this.width=window.innerWidth-t,this.width/window.innerWidth>.5)return;if(this.width/window.innerWidth<.05)return this.closeSidebar(),void(this.isResizing=!1);this.updateSidebarWidth(this.width)}}stopResize(e){this.isResizing=!1,document.removeEventListener(\\\"pointermove\\\",(e=>this.resize(e)))}closeSidebar(){const e=this.theme===this.notebook.name?this.notebook.stateTiddler:this.defaultStateTiddler;$tw.wiki.setText(e,\\\"text\\\",null,\\\"no\\\"),this.updateSidebarWidth(this.getDefaultSidebarWidth())}updateSidebarWidth(e){const t=this.theme===this.notebook.name?this.notebook.widthTiddler:this.defaultWidthTiddler;requestAnimationFrame((()=>{$tw.wiki.setText(t,null,null,`${Number(e).toFixed(0)}px`)}))}checker(){const e=new $tw.utils.Logger(t.pluginname);$tw.modules.titles[\\\"tailwindcss.min.js\\\"]||e.alert(t.warning)}shouldRefresh(e,t){const i=Object.keys(e);return t.some((e=>i.includes(e)))}refresh(e){return!!this.shouldRefresh(e,this.listenTiddlers)&&(this.refreshSelf(),console.warn(\\\"refresh\\\",new Date),!0)}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}