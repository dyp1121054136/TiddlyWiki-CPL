{"title":"$:/plugins/oeyoews/tiddlywiki-videos","description":"Tiddlywiki Videos","author":"oeyoews","version":"0.0.1","core-version":">=5.2.5","type":"application/json","plugin-type":"plugin","name":"Tiddlywiki Videos","list":"readme","dependents":"","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/tiddlywiki-videos/readme\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-videos/readme\",\"text\":\"!! Tiddlywiki Videos\\n\\n<$youtube youtubeId=\\\"o7GyFa90klg\\\" />\\n<$youtube youtubeId=\\\"PLjNhkoz3yGwG9ISeHEYsdUSQdQarKJ8u3\\\" playlist/>\\n\\n!! Ref\\n\\n* https://developers.google.com/youtube/player_parameters?hl=zh-cn\\n\"},\"$:/plugins/oeyoews/tiddlywiki-videos/widget\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-videos/widget\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/tiddlywiki-videos/widget\\ntype: application/javascript\\nmodule-type: widget\\n\\nyoutube widget\\n\\\\*/\\n\\n(function () {\\n  const { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n\\n  class YoutubeWidget extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n    }\\n\\n    render(parent, nextSibling) {\\n      if (!$tw.browser) return;\\n\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      const createElement = $tw.utils.domMaker;\\n\\n      const { youtubeId = 'o7GyFa90klg', playlist } = this.attributes;\\n\\n      const prefix = 'https://www.youtube.com/embed/';\\n\\n      /* const iframeSrc = playlist\\n        ? `${prefix}videoseries?list=${youtubeId}`\\n        : `${prefix}${youtubeId}`; */\\n      const midleUrl = playlist ? 'videoseries?list=' : '';\\n      const src = prefix + midleUrl + youtubeId;\\n\\n      // Create an object to represent the iframe attributes\\n      const iframeAttributes = {\\n        src,\\n        width: 800,\\n        height: 450,\\n        frameborder: 0,\\n        allowfullscreen: '',\\n        class: 'border-none shadow-lg rounded-lg', // w-full\\n        allowsInlineMediaPlayback: 'true',\\n        playsinline: '1',\\n        title: 'youtube video', // example attribute\\n      };\\n\\n      const iframeNode = this.document.createElement('iframe');\\n\\n      const domNode = createElement('div', {\\n        class: 'flex justify-center item-center my-4',\\n        children: [iframeNode],\\n      });\\n\\n      Object.entries(iframeAttributes).forEach(([key, value]) => {\\n        iframeNode.setAttribute(key, value);\\n      });\\n\\n      parent.insertBefore(domNode, nextSibling);\\n      this.domNodes.push(domNode);\\n    }\\n  }\\n\\n  exports.youtube = YoutubeWidget;\\n  exports.yt = YoutubeWidget;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}