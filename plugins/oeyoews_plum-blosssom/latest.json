{"title":"$:/plugins/oeyoews/plum-blosssom","description":"plum-blosssom","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"plum-blosssom","meat#disabled":"yes","qrcode":"yes","created":"2023-12-30","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/plum-blosssom/readme\":{\"title\":\"$:/plugins/oeyoews/plum-blosssom/readme\",\"text\":\"<!-- plugin template readme -->\\n\\n## Motivation\\n\\n- https://github.com/antfu/antfu.me/blob/eb52c0f20a2673ea5af15a4c9154e4181fe177d5/src/components/Plum.vue#L19\\n- https://github.com/antfu/plum-demo\\n- https://www.bilibili.com/video/BV1wY411n7er/?spm_id_from=333.999.0.0&vd_source=d6afd7eedd9f9c940321c63f0a1539e3\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"plum-blosssom\"},\"$:/plugins/oeyoews/plum-blosssom/pageTemplate\":{\"title\":\"$:/plugins/oeyoews/plum-blosssom/pageTemplate\",\"tags\":\"$:/tags/PageTemplate\",\"text\":\"<!-- TODO: only on homepage -->\\n<div class=\\\"fixed inset-0 pointer-events-none print:hidden -z-[1]\\\">\\n\\t<$plum />\\n</div>\"},\"$:/plugins/oeyoews/plum-blosssom/plum.js\":{\"title\":\"$:/plugins/oeyoews/plum-blosssom/plum.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/plum-blosssom/plum.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports=function(t){const e=Math.PI,i=Math.PI/2,n=Math.PI/12,o=()=>.6*h()+.2,{random:h}=Math,a={width:window.innerWidth,height:window.innerHeight};let c=!1;const{ctx:l}=function(t,e=400,i=400,n){const o=t.getContext(\\\"2d\\\"),h=window.devicePixelRatio||1,a=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1,c=n||h/a;return t.style.width=`${e}px`,t.style.height=`${i}px`,t.width=c*e,t.height=c*i,o.scale(c,c),{ctx:o,dpi:c}}(t,a.width,a.height);let d=[],s=[];const r=(t,e,i,o={value:0})=>{const c=6*h();o.value+=1;const[s,g]=((t=0,e=0,i=0,n=0)=>[t+i*Math.cos(n),e+i*Math.sin(n)])(t,e,c,i);l.beginPath(),l.moveTo(t,e),l.lineTo(s,g),l.stroke();const w=i+h()*n,m=i-h()*n;if(s<-100||s>a.width+100||g<-100||g>a.height+100)return;const u=o.value<=20?.8:.5;h()<u&&d.push((()=>r(s,g,w,o))),h()<u&&d.push((()=>r(s,g,m,o)))};let g;const w=()=>{s=d,d=[],s.length||(console.log(\\\"cancle\\\"),g&&cancelAnimationFrame(g),c=!0),s.forEach((t=>{Math.random()<.5?d.push(t):t()})),g=requestAnimationFrame(w)};window.addEventListener(\\\"load\\\",(()=>{cancelAnimationFrame(g),l.clearRect(0,0,a.width,a.height),l.lineWidth=1,l.strokeStyle=\\\"#88888825\\\",s=[],d=[()=>r(o()*a.width,-5,i),()=>r(o()*a.width,a.height+5,-i),()=>r(-5,o()*a.height,0),()=>r(a.width+5,o()*a.height,e)],a.width<500&&(d=d.slice(0,2)),w(),c=!1}))};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/plum-blosssom/widget.js\":{\"title\":\"$:/plugins/oeyoews/plum-blosssom/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/plum-blosssom/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nplum-blosssom widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports.plum=class extends e{constructor(e,t){super(e,t)}render(e,t){if(!$tw.browser)return;if(e.isTiddlyWikiFakeDom)return;this.computeAttributes(),this.execute();const r=document.createElement(\\\"canvas\\\");require(\\\"./plum\\\")(r),e.insertBefore(r,t),this.domNodes.push(r)}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}