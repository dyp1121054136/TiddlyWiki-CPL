{"title":"$:/plugins/oeyoews/plum-blosssom","description":"plum-blosssom","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"plum-blosssom","meat#disabled":"yes","qrcode":"yes","created":"2023-12-30","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/plum-blosssom/readme\":{\"title\":\"$:/plugins/oeyoews/plum-blosssom/readme\",\"text\":\"<!-- plugin template readme -->\\n\\n## Motivation\\n\\n- https://github.com/antfu/antfu.me/blob/eb52c0f20a2673ea5af15a4c9154e4181fe177d5/src/components/Plum.vue#L19\\n- https://github.com/antfu/plum-demo\\n- https://www.bilibili.com/video/BV1wY411n7er/?spm_id_from=333.999.0.0&vd_source=d6afd7eedd9f9c940321c63f0a1539e3\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"plum-blosssom\"},\"$:/plugins/oeyoews/plum-blosssom/pageTemplate\":{\"title\":\"$:/plugins/oeyoews/plum-blosssom/pageTemplate\",\"tags\":\"$:/tags/PageTemplate\",\"text\":\"<!-- TODO: only on homepage -->\\n<div class=\\\"fixed inset-0 pointer-events-none print:hidden -z-[1]\\\">\\n\\t<$plum />\\n</div>\"},\"$:/plugins/oeyoews/plum-blosssom/plum.js\":{\"title\":\"$:/plugins/oeyoews/plum-blosssom/plum.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/plum-blosssom/plum.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nmodule.exports=function(t){const e=Math.PI,i=Math.PI/2,h=Math.PI/12,n={width:window.innerWidth,height:window.innerHeight},{ctx:o}=function(t,e=400,i=400,h){const n=t.getContext(\\\"2d\\\"),o=window.devicePixelRatio||1,a=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,r=h||o/a;return t.style.width=`${e}px`,t.style.height=`${i}px`,t.width=r*e,t.height=r*i,n.scale(r,r),{ctx:n,dpi:r}}(t,n.width,n.height);let a=[],r=[];const c=(t,e,i,r={value:0})=>{const s=6*Math.random();r.value+=1;const[l,m]=d(t,e,s,i);o.beginPath(),o.moveTo(t,e),o.lineTo(l,m),o.stroke();const g=i+Math.random()*h,w=i-Math.random()*h;if(l<-100||l>n.width+100||m<-100||m>n.height+100)return;const u=r.value<=30?.8:.5;Math.random()<u&&a.push((()=>c(l,m,g,r))),Math.random()<u&&a.push((()=>c(l,m,w,r)))},d=(t=0,e=0,i=0,h=0)=>[t+i*Math.cos(h),e+i*Math.sin(h)],s=()=>{r=a,a=[],r.length||(cancelAnimationFrame(l),stopped=!0),r.forEach((t=>{Math.random()<.5?a.push(t):t()})),l=requestAnimationFrame(s)};let l;const m=()=>.6*Math.random()+.2;cancelAnimationFrame(l),o.clearRect(0,0,n.width,n.height),o.lineWidth=1,o.strokeStyle=\\\"#88888825\\\",r=[],a=[()=>c(m()*n.width,-5,i),()=>c(m()*n.width,n.height+5,-i),()=>c(-5,m()*n.height,0),()=>c(n.width+5,m()*n.height,e)],n.width<500&&(a=a.slice(0,2)),l=requestAnimationFrame(s),stopped=!1};\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/plum-blosssom/widget.js\":{\"title\":\"$:/plugins/oeyoews/plum-blosssom/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/plum-blosssom/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nplum-blosssom widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports.plum=class extends e{constructor(e,t){super(e,t)}render(e,t){if(!$tw.browser)return;this.parentDomNode=e,this.computeAttributes(),this.execute();const s=document.createElement(\\\"canvas\\\");require(\\\"./plum\\\")(s),e.insertBefore(s,t),this.domNodes.push(s)}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}