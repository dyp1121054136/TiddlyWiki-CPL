{"title":"$:/plugins/xp/aggregation-aphorism","name":"Aphorism","description":"Collection of aphorisms","version":"0.5.2","plugin-type":"plugin","parent-plugin":"$:/plugins/xp/aggregation","dependents":"$:/plugins/xp/aggregation","type":"application/json","author":"kl","text":"{\"tiddlers\":{\"APHORISM\":{\"title\":\"APHORISM\",\"caption\":\"{{$:/xp/images/aphorism}} APHORISM\",\"color\":\"#bbb\",\"icon\":\"$:/xp/images/aphorism\",\"tmap.id\":\"47b426db-1120-42e3-be79-39e1f545a650\",\"text\":\"\\\\import $:/aphorism-macros\\n\\n<div class=\\\"tc-sidebar-lists xp-float-right\\\">\\n&emsp;<<aggregationCount>>&emsp;<<help-button-to \\\"$:/aphorism-help\\\">>\\n</div>\\n\\n<$macrocall\\n  $name=\\\"tabs\\\"\\n  tabsList=\\\"$:/aphorism-capture $:/aphorism-aggregation-view $:/aphorism-starred-items\\\"\\n  default=\\\"$:/aphorism-aggregation-view\\\"\\n  state=\\\"$:/state/tab/aphorism\\\"\\n/>\"},\"$:/aphorism-aggregation-view\":{\"title\":\"$:/aphorism-aggregation-view\",\"caption\":\"聚合视图\",\"text\":\"\\\\import $:/aggregation/macros/general $:/aphorism-macros\\n\\\\whitespace trim\\n\\n\\\\define storeTitle() $:/temp/search/aggregation-aphorism\\n\\n\\\\define cancel-search-actions()\\n<$action-deletetiddler $filter=\\\"[<filterState>get[checktiddler]enlist-input[]]\\\"/>\\n<$action-deletetiddler $filter=\\\"[<storeTitle>] [<filterState>] [<dateTiddler>]\\\"/>\\n<$action-sendmessage $message=\\\"tm-focus-selector\\\" $param=\\\".xp-search-aphorism input\\\"/>\\n\\\\end\\n\\n\\\\define filterState() $:/state/filter/aggregation-aphorism\\n\\\\define dateTiddler() $:/temp/filter/aggregation-aphorism/Date\\n\\\\define templateTiddler() $:/config/xp/aggregation-aphorism/TiddlerTemplate\\n\\n\\\\define alltagsfilter()\\n<$let L=\\\"tag[\\\" R=\\\"]\\\" lb=\\\"[\\\" rb={{{ [<configTiddler>get[text]removeprefix<lb>] }}}>\\n<$set filter=\\\"[list<filterState>addprefix<L>addsuffix<R>]+[join[]addprefix<lb>addsuffix<rb>addsuffix<sortRun>addsuffix<timeRun>]\\\" name=\\\"alltags\\\" select=0>\\n<$text text=<<alltags>>/>\\n</$set>\\n</$let>\\n\\\\end\\n\\n\\\\procedure template-button(evenodd:\\\"$:/templates/transclusion-aphorism-evenodd\\\") \\n\\\\whitespace trim\\n<$button tooltip=\\\"Switching Views\\\" class=\\\"tc-btn-invisible tc-btn-mini\\\">\\n{{$:/xp/images/switch}}\\n<$reveal state=<<templateTiddler>> type=\\\"nomatch\\\" text=<<evenodd>>>\\n<$action-setfield $tiddler=<<templateTiddler>> text=<<evenodd>>/>\\n</$reveal>\\n<$reveal state=<<templateTiddler>> type=\\\"match\\\" text=<<evenodd>>>\\n<$action-setfield $tiddler=<<templateTiddler>> text=\\\"$:/templates/transclusion-aphorism\\\"/>\\n</$reveal>\\n</$button>\\n\\\\end template-button\\n\\n\\\\define keepstate() $:/keepstate/xp/aggregation-aphorism\\n\\\\define pageTiddler() $(keepstate)$/Pagination\\n\\\\define pageStateTiddler() $(keepstate)$/page-number\\n\\\\define entryPerPageStateTiddler() $(keepstate)$/entry-per-page\\n\\n\\n<$list filter=<<aggr-has-tids>> emptyMessage={{$:/aggregation/prompt}} variable=\\\"ignore\\\">\\n\\n<span class=\\\"xp-search xp-search-aphorism\\\">\\nSearch &#32; <<selectSearchScope>> <i class='tc-small-gap-left'/>\\n<$macrocall\\n  $name=\\\"keyboard-driven-input\\\"\\n  tiddler=<<storeTitle>>\\n  type=\\\"search\\\"\\n  tag=\\\"input\\\"\\n  focus={{$:/config/xp/aggregation/SearchAutoFocus}}\\n  inputCancelActions=<<cancel-search-actions>>\\n/>\\n<i class='tc-tiny-gap-left'/>\\n<<aggrbtn-filter>>\\n<$set name=\\\"stateTiddler\\\" filter=\\\"[<storeTitle>!is[missing]has[text]]\\\" value=<<storeTitle>> emptyValue=<<filterState>>>\\n<$reveal state=<<stateTiddler>> type=\\\"nomatch\\\" text=\\\"\\\">\\n<$button class=\\\"tc-btn-invisible\\\">\\n<<cancel-search-actions>>\\n{{$:/core/images/close-button}}\\n</$button>\\n</$reveal>\\n</$set>\\n<<template-button>>\\n<<pagination-button>>\\n</span>\\n<$let\\n  userInput={{{ [<storeTitle>get[text]] }}}\\n  pagination={{{ [<pageTiddler>get[text]] }}}\\n  timeRun={{{ [<filterState>get[filter]] }}}\\n  sortRun=\\\"+[!sort[created]]\\\"\\n  resultCount=\\\"\\\"\\\"<$count filter=\\\"[subfilter<searchFilter>!is[draft]]\\\"/>\\\"\\\"\\\"\\n  >\\n<$wikify text=<<alltagsfilter>> name=\\\"alltagsfilterwikified\\\">\\n<$set name=\\\"searchFilter\\\" filter=\\\"[<filterState>has[list]]\\\" value=<<alltagsfilterwikified>> emptyValue={{{ [<configTiddler>get[text]addsuffix[ ]addsuffix<sortRun>addsuffix<timeRun>] }}}>\\n<$set name=\\\"stateTiddler\\\" filter=\\\"[<storeTitle>!is[missing]get[text]!is[blank]]\\\" value=<<storeTitle>> emptyValue=<<filterState>>>\\n<$reveal state=<<stateTiddler>> type=\\\"nomatch\\\" text=\\\"\\\">\\n<$reveal state=<<filterState>> type=\\\"nomatch\\\" text=\\\"yes\\\">\\n<span class=\\\"xp-search-results\\\"><<lingo System/Matches>></span>\\n</$reveal>\\n</$reveal>\\n</$set>\\n<$reveal state=<<filterState>> type=\\\"match\\\" text=\\\"yes\\\" animate=\\\"yes\\\">\\n<div class=\\\"xp-wrapper-aggrfilter\\\">\\n\\n<<filtered-by-tag>>\\n\\nFiltered by Time: <<aggrbtn-filter-reset>>\\n\\n<div class=\\\"xp-aggrfilter-category\\\">\\n<table>\\n<tbody>\\n<tr>\\n<<filtered-by-time>>\\n</tr>\\n</tbody>\\n</table>\\n</div>\\n\\n</div>\\n</$reveal>\\n<$reveal state=<<filterState>> type=\\\"match\\\" text=\\\"yes\\\">\\n<<lingo System/Matches>>\\n</$reveal>\\n\\n<$let\\n  listFilter=\\\"[subfilter<searchFilter>] -[subfilter<searchFilter>has[draft.of]get[draft.title]]\\\"\\n  total-entries={{{ [subfilter<listFilter>count[]] }}}\\n  page-number={{{ [<pageStateTiddler>get[text]] ~[[1]] }}} \\n  entries-per-page={{{ [<entryPerPageStateTiddler>get[text]] ~15 }}}\\n  low={{{ [<page-number>subtract[1]multiply<entries-per-page>] }}}  \\n  high={{{ [<page-number>multiply<entries-per-page>] }}}\\n  >\\n<$set name=\\\"finalFilter\\\" filter=\\\"[<pagination>match[yes]]\\\" value=\\\"[subfilter<listFilter>first<high>] -[subfilter<listFilter>first<low>]\\\" emptyValue=<<listFilter>>>\\n\\n<$transclude\\n  $variable=\\\"substory-navigator\\\"\\n  text=\\\"\\\"\\\"<p/>\\n<div class=\\\"tc-link-info\\\">\\n\\n<$list\\n  filter=<<finalFilter>>\\n  history=<<SubHistoryList>>\\n  template={{{ [<templateTiddler>has[text]get[text]] ~[[$:/templates/transclusion-aphorism-evenodd]] }}}\\n  editTemplate={{{ [[$:/config/xp/aggregation-aphorism/EditTemplate]has[text]get[text]] ~[{$:/config/ui/EditTemplate}] }}}\\n  storyview={{$:/config/xp/aggregation-aphorism/view}}\\n/>\\n\\n</div>\\n\\\"\\\"\\\"\\n  catchlink=yes\\n  filter=\\\"[tag<aggregationTag>]\\\"\\n/>\\n\\n<<show-pagination>>\\n\\n</$set>\\n</$let>\\n\\n</$set>\\n</$wikify>\\n</$let>\\n\\n</$list>\"},\"$:/aphorism-capture/EditTiddler\":{\"title\":\"$:/aphorism-capture/EditTiddler\"},\"$:/aphorism-capture\":{\"title\":\"$:/aphorism-capture\",\"caption\":\"捕获文本\",\"text\":\"\\\\import $:/aggregation/macros/general $:/aphorism-macros\\n\\\\define get-tags() $(aggregationTag)$ $(listFieldTags)$\\n\\\\define newTagNameTiddler() $:/temp/aphorism-capture/NewTagName\\n\\\\define storeTitle() $:/temp/aphorism-capture/NewTagName/input\\n\\\\define editTiddler() $:/aphorism-capture/EditTiddler\\n\\n\\\\define filterState() $:/state/filter/aphorism-capture\\n\\n\\\\define aggrfilteritem(item:\\\"\\\")\\n<$checkbox tiddler=<<qualify \\\"\\\"\\\"$:/temp/$item$\\\"\\\"\\\">> field=\\\"status\\\" checked=\\\"selected\\\" checkactions=<<checkactions \\\"\\\"\\\"$item$\\\"\\\"\\\">> uncheckactions=<<uncheckactions \\\"\\\"\\\"$item$\\\"\\\"\\\">> default=\\\"closed\\\"> <$text text=<<__item__>>/></$checkbox>\\n\\\\end\\n\\n\\\\define checkactions(item:\\\"\\\")\\n<$action-listops $tiddler=<<filterState>> $subfilter=\\\"[[$item$]]\\\"/>\\n<$action-listops $tiddler=<<filterState>> $field=\\\"checktiddler\\\" $subfilter={{{ [<qualify \\\"\\\"\\\"$:/temp/$item$\\\"\\\"\\\">format:titlelist[]] }}}/>\\n\\\\end\\n\\n\\\\define select-checkbox(item:\\\"\\\")\\n<$action-setfield $tiddler=<<qualify \\\"\\\"\\\"$:/temp/$item$\\\"\\\"\\\">> status=\\\"selected\\\"/>\\n\\\\end\\n\\n\\\\define uncheckactions(item:\\\"\\\")\\n<$action-listops $tiddler=<<filterState>> $subfilter=\\\"-[[$item$]]\\\"/>\\n\\\\end\\n\\n\\\\define input-accept-actions()\\n<$vars tag={{$(newTagNameTiddler)$}}>\\n<$action-listops $tiddler=<<filterState>> $subfilter=\\\"[<tag>trim[]]\\\"/>\\n<$macrocall $name=\\\"checkactions\\\" item=<<tag>>/>\\n<$macrocall $name=\\\"select-checkbox\\\" item=<<tag>>/>\\n</$vars>\\n<<cancel-input-actions>>\\n\\\\end\\n\\n\\\\define cancel-input-actions()\\n<$action-deletetiddler $filter=\\\"[<newTagNameTiddler>] [<storeTitle>]\\\"/>\\n\\\\end\\n\\n\\\\define aphorism-new-tag(actions)\\n\\\\whitespace trim\\n<div class=\\\"tc-edit-add-tag\\\">\\n<div>\\n<span class=\\\"tc-add-tag-name tc-small-gap-right\\\">\\n<$macrocall\\n  $name=\\\"keyboard-driven-input\\\"\\n  tiddler=<<newTagNameTiddler>>\\n  storeTitle=<<storeTitle>> \\n  inputAcceptActions=<<input-accept-actions>>\\n  inputCancelActions=<<cancel-input-actions>>\\n  tag=\\\"input\\\"\\n  placeholder={{$:/language/EditTemplate/Tags/Add/Placeholder}}\\n  class=\\\"tc-edit-texteditor tc-popup-handle\\\"\\n  tabindex=<<tabIndex>>\\n  focus=\\\"no\\\"\\n/>\\n<span class=\\\"tc-add-tag-button tc-small-gap-left\\\">\\n<$vars tag={{$(newTagNameTiddler)$}}>\\n<$button set=<<newTagNameTiddler>> setTo=\\\"\\\">\\n<$action-listops $tiddler=<<filterState>> $subfilter=\\\"[<tag>trim[]]\\\"/>\\n$actions$\\n{{$:/language/EditTemplate/Tags/Add/Button}}\\n</$button>\\n</$vars>\\n</span>\\n</span>\\n</div>\\n</div>\\n\\\\end\\n\\n\\\\define resetButton()\\n\\\\whitespace trim\\n<$list filter=\\\"[<filterState>has[list]]\\\">\\n&emsp;<$button class=\\\"xp-aggrfilter-dynamic-btn\\\">\\n<$action-deletetiddler $filter=\\\"[<filterState>get[checktiddler]enlist-input[]]\\\"/>\\n<$action-deletetiddler $filter=<<filterState>>/>\\nreset\\n</$button>\\n</$list>\\n\\\\end\\n\\n\\\\define create-actions()\\n<$list filter=\\\"[<editTiddler>has[text]]\\\" variable=\\\"ignore\\\">\\n<$action-createtiddler\\n  $basetitle={{{ [[$:/aphorism/]addsuffix<now \\\"[UTC]YYYY0MM0DD0hh0mm0ssXXX\\\">] }}}\\n  text={{{ [<editTiddler>get[text]] }}}\\n  tags=<<get-tags>>\\n/>\\n<$action-deletefield $tiddler=<<editTiddler>> text/>\\n<$action-sendmessage $message=\\\"tm-notify\\\" $param=\\\"$:/language/Notifications/CreateTiddler\\\"/>\\n</$list>\\n\\\\end\\n\\n\\\\define createButton()\\n\\\\whitespace trim\\n<$vars listFieldTags={{{ [<filterState>get[list]] }}}>\\n<$droppable actions=<<drop-actions-create>>>\\n&emsp;<$button style=\\\"padding:1px 36px;\\\"> Create\\n<<create-actions>>\\n</$button>\\n</$droppable>\\n</$vars>\\n\\\\end\\n\\n\\\\define tagPanel(filterState)\\n<div class=\\\"xp-wrapper-aggrfilter\\\">\\n\\n选择标签： <<resetButton>>\\n\\n<$wikify text=<<listPresetCtags>> name=\\\"presetCtags\\\">\\n<$wikify text=<<listTagsInUse>> name=\\\"tagsInUse\\\">\\n<div class=\\\"xp-aggrfilter-category\\\" style=\\\"font-size:1em;\\\">\\n<table>\\n<$list filter=<<aggr-category>> variable=\\\"listItem\\\">\\n<$macrocall $name=\\\"aggrFilterCategory\\\" title={{{ [<listItem>split[/]last[1]sentencecase[]] }}} configTiddler=<<listItem>>/>\\n</$list>\\n<$list filter=\\\"[enlist<tagsInUse>] [list<filterState>] -[enlist<presetCtags>] +[limit[1]]\\\" variable=\\\"ignore\\\">\\n<tr align=\\\"left\\\">\\n<td><span class=\\\"xp-aggrfilter-category-title tc-muted\\\">Others</span></td>\\n<td>\\n<span class=\\\"xp-aggrfilter-category-item\\\">\\n<$list filter=\\\"[enlist<tagsInUse>] [list<filterState>] -[enlist<presetCtags>] +[sort[]]\\\" variable=\\\"currentItem\\\">\\n<$macrocall $name=\\\"aggrfilteritem\\\" item=<<currentItem>>/>\\n</$list>\\n</span>\\n</td>\\n</tr>\\n</$list>\\n<tr align=\\\"left\\\">\\n<td><span class=\\\"xp-aggrfilter-category-title tc-muted\\\">Add</span></td>\\n<td>\\n<span class=\\\"xp-aggrfilter-category-item\\\">\\n<$fieldmangler tiddler=<<tagTiddler>>>\\n<$macrocall $name=\\\"aphorism-new-tag\\\" actions=<<input-accept-actions>>/>\\n</$fieldmangler>\\n</span>\\n</td>\\n</tr>\\n</table>\\n</div>\\n</$wikify>\\n</$wikify>\\n\\n创建条目： <<createButton>>\\n\\n</div>\\n\\\\end\\n\\n<$macrocall $name=\\\"tagPanel\\\" filterState=<<filterState>> />\\n\\n<$let\\n  editPreviewStateTiddler={{{ [{$:/config/ShowEditPreview/PerTiddler}!match[yes]then[$:/state/showeditpreview]] :else[<qualify \\\"$:/state/showeditpreview\\\">] }}}\\n  exclude=\\\"$:/xp/ui/EditorToolbar/annotate\\\">\\n<div class=\\\"xp-aphorism-edit-frame\\\">\\n<$tiddler tiddler=<<editTiddler>>>\\n<$keyboard key=\\\"((input-accept-variant))\\\" actions=<<create-actions>>>\\n{{||$:/xp/ui/EditTemplate/body/default}}\\n</$keyboard>\\n</$tiddler>\\n</div>\\n</$let>\"},\"$:/aphorism-help\":{\"title\":\"$:/aphorism-help\",\"color\":\"#bbb\",\"icon\":\"$:/core/images/help\",\"text\":\"<div class=\\\"blue-box\\\">\\n\\n''Aphorism 的用途：''收集文本片段。\\n\\n</div>\\n\\n\\n! 为什么要使用 Aphorism？\\n\\n聚合主题 [[SNIPPETS]] 用于收集代码片段，而 [[APHORISM]] 用于收集文本片段。Aphorism 的适用性更广泛。比如收集：\\n\\n* 名人名言、格言警句、谚语等\\n* 书籍、影视剧、网文中自己喜欢的语录\\n* 甚至仿 flomo 记录每日感想\\n* ……\\n\\n要管理这么多主题，关键点在于使用标签对内容进行分类。\\n\\n! 如何使用？\\n\\n# ''捕获文本''\\n#* 该页面可以轻松地捕获文本。将文本粘贴或者拖拽到文本框 > 选择标签或者添加新标签 > 创建条目。<br><br>\\n\\n# ''聚合视图''\\n#* 查阅或者管理条目。<div class=\\\"gray-box\\\" style=\\\"line-height:1.75;\\\">\\n\\n|Item |Description |h\\n|!<<.icon $:/xp/images/filter>> 过滤按钮 |打开过滤面板，添加过滤条件：标签、时间/日期。 |\\n|!<<.icon $:/xp/images/switch>> 视图按钮 |在两种视图之间切换。 |\\n|!<<.icon $:/core/images/chevron-down>> 分页按钮 |开启分页模式。 |\\n\\n</div>\\n\\n# ''分类标签''\\n#* <div class=\\\"gray-box\\\">\\n\\n该主题预设分类标签以 [[Title List|https://tiddlywiki.com/static/Title%2520List.html]] 的形式存储于：\\n\\n<<list-links filter:\\\"[all[shadows+tiddlers]prefix[$:/config/xp/aggregation-aphorism/category/]]\\\" type:\\\"ol\\\">>\\n\\n你可以修改配置文件中的分类标签，或者新建配置文件 `$:/config/xp/aggregation-aphorism/category/<你的新分类>`，添加一个新类别。删除配置文件的内容，则取消显示。\\n\\n</div>\\n\\n# 星标条目\\n#* <div class=\\\"gray-box\\\">\\n\\n打上标签 `Star`，条目会显示于该页面。\\n\\n</div>\\n\\n! 了解更多\\n\\n请查看 $:/plugins/xp/aggregation。\"},\"$:/aphorism-macros\":{\"title\":\"$:/aphorism-macros\",\"code-body\":\"yes\",\"tags\":\"$:/tags/Macro/Aggregation\",\"text\":\"\\\\define aggregationTag() Aphorism\\n\\\\define systemCTag()     $:/tags/AphorismCategories\\n\\\\define categoryPrefix() $:/config/xp/aggregation-aphorism/category/\\n\\\\define SubStoryList()\\t $:/temp/xp/aggregation-aphorism/SubStoryList\\n\\\\define SubHistoryList() $:/temp/xp/aggregation-aphorism/SubHistoryList\\n\"},\"$:/aphorism-starred-items\":{\"title\":\"$:/aphorism-starred-items\",\"caption\":\"星标条目\",\"text\":\"\\\\import $:/aggregation/macros/general $:/aphorism-macros\\n\\n\\\\define starFilter() [tag<aggregationTag>tag[Star]!sort[created]]\\n\\n\\\\define has-starred-item()\\n[tag<aggregationTag>tag[Star]!has[draft.of]limit[1]]\\n\\\\end\\n\\n\\\\define starred-item-has-tags()\\n[tag<aggregationTag>tag[Star]!has[draft.of]tags[]remove[Star]] -[<aggregationTag>] +[limit[1]]\\n\\\\end\\n\\n\\\\define starred-item-tags()\\n[tag<aggregationTag>tag[Star]!has[draft.of]tags[]remove[Star]sort[]] -[<aggregationTag>]\\n\\\\end\\n\\n\\\\define filterState() $:/state/filter/aphorism-starred-items\\n\\n\\\\define alltagsfilter()\\n<$let L=\\\"tag[\\\" R=\\\"]\\\" lb=\\\"[\\\" rb={{{ [<starFilter>removeprefix<lb>] }}}>\\n<$set filter=\\\"[list<filterState>addprefix<L>addsuffix<R>]+[join[]addprefix<lb>addsuffix<rb>]\\\" name=\\\"alltags\\\" select=0>\\n<$text text=<<alltags>>/>\\n</$set>\\n</$let>\\n\\\\end\\n\\n<$set name=\\\"stateCode\\\" filter=<<has-starred-item>> value=\\\"1\\\" emptyValue=\\\"0\\\">\\n<$reveal default=<<stateCode>> type=\\\"match\\\" text=\\\"0\\\">\\n<div class=\\\"tc-muted\\\" style=\\\"text-align:center;margin:50px 0 25px;\\\">\\n<div class=\\\"xp-image-big-muted\\\">{{$:/core/images/star-filled}}</div>\\nStarred tiddler will appear here\\n</div>\\n</$reveal>\\n\\n<$reveal default=<<stateCode>> type=\\\"match\\\" text=\\\"1\\\">\\n\\n<$list filter=<<starred-item-has-tags>> variable=\\\"ignore\\\">\\n<div class=\\\"xp-wrapper-aggrfilter\\\">\\n<div class=\\\"xp-aggrfilter-category\\\" style=\\\"font-size:1em;padding:10px 0;\\\">\\n<span class=\\\"xp-aggrfilter-category-item\\\">\\n<$list filter=<<starred-item-tags>> variable=\\\"currentItem\\\">\\n<$macrocall $name=\\\"aggrfilteritem\\\" item=<<currentItem>>/>\\n</$list>\\n<<aggrbtn-filter-deselect>>\\n</span>\\n</div>\\n</div>\\n</$list><!-- Filter Panel -->\\n\\n<$wikify name=\\\"alltagsfilterwikified\\\" text=\\\"\\\"\\\"<$macrocall $name=\\\"alltagsfilter\\\" filterState=<<filterState>>/>\\\"\\\"\\\">\\n<$set name=\\\"listFilter\\\" filter=\\\"[<filterState>has[list]]\\\" value=<<alltagsfilterwikified>> emptyValue=<<starFilter>>>\\n<$let finalFilter=\\\"[subfilter<listFilter>] -[subfilter<listFilter>has[draft.of]get[draft.title]]\\\">\\n\\n<$transclude\\n  $variable=\\\"substory-navigator\\\"\\n  text=\\\"\\\"\\\"<p/>\\n<div class=\\\"tc-link-info\\\">\\n\\n<$list\\n  filter=<<finalFilter>>\\n  history=<<SubHistoryList>>\\n  template=\\\"$:/templates/transclusion-aphorism-evenodd\\\"\\n  editTemplate={{{ [[$:/config/xp/aggregation-aphorism/EditTemplate]has[text]get[text]] ~[{$:/config/ui/EditTemplate}] }}}\\n  storyview={{$:/config/xp/aggregation-aphorism/view}}\\n/>\\n\\n</div>\\n\\\"\\\"\\\"\\n  catchlink=yes\\n  filter=\\\"[tag<aggregationTag>tag[Star]]\\\"\\n/>\\n\\n</$let>\\n</$set>\\n</$wikify>\\n</$reveal>\\n</$set>\"},\"$:/config/xp/aggregation-aphorism/EditTemplate\":{\"title\":\"$:/config/xp/aggregation-aphorism/EditTemplate\",\"text\":\"$:/xp/aggregation-aphorism/ui/EditTemplate\"},\"$:/config/xp/aggregation-aphorism/TiddlerTemplate\":{\"title\":\"$:/config/xp/aggregation-aphorism/TiddlerTemplate\",\"text\":\"$:/templates/transclusion-aphorism-evenodd\"},\"$:/config/xp/aggregation-aphorism/category/preset\":{\"title\":\"$:/config/xp/aggregation-aphorism/category/preset\",\"text\":\"爱国 集体 人生 道德 勤俭 诚信 谦虚 立志 意志 磨练 求知 进取 行动 交往 友谊 惜时 劳动 \\n人生 事业 生活 时间 爱情 友情 成功 青春\\n\"},\"$:/config/xp/aggregation-aphorism/category/preset2\":{\"title\":\"$:/config/xp/aggregation-aphorism/category/preset2\",\"text\":\"自立自强 拼搏奋斗 自尊自爱自信 追求理想 开拓和创新 无私奉献 正视生死 追求真理 敬业精神 报效祖国 摒弃嫉妒\\n\"},\"$:/config/xp/aggregation/ui/aphorism\":{\"title\":\"$:/config/xp/aggregation/ui/aphorism\",\"text\":\"APHORISM\"},\"$:/config/xp/aggregation-aphorism/view\":{\"title\":\"$:/config/xp/aggregation-aphorism/view\",\"text\":\"pop\"},\"$:/xp/images/all\":{\"title\":\"$:/xp/images/all\",\"tags\":\"$:/tags/Image\",\"text\":\"\\\\parameters (size:\\\"22pt\\\")\\n<svg width=<<size>> height=<<size>> class=\\\"xp-image-all tc-image-button\\\" viewBox=\\\"0 0 1024 1024\\\"><path d=\\\"M215.209 158.769L107.722 534.974A304.633 304.633 0 0 0 96 618.667V864c0 17.673 14.327 32 32 32 17.673 0 32-14.327 32-32V636.211h192V864c0 17.673 14.327 32 32 32 17.673 0 32-14.327 32-32V620.993c0-29.849-4.16-59.553-12.36-88.254l-106.848-373.97C291.588 140.556 274.941 128 256 128c-18.941 0-35.588 12.556-40.791 30.769zM352 576H160l96-336 96 336zM640 832h-96V160c0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32v672c0 35.346 28.654 64 64 64h96c17.673 0 32-14.327 32-32 0-17.673-14.327-32-32-32zM896 832h-96V160c0-17.673-14.327-32-32-32-17.673 0-32 14.327-32 32v672c0 35.346 28.654 64 64 64h96c17.673 0 32-14.327 32-32 0-17.673-14.327-32-32-32z\\\"/></svg>\"},\"$:/xp/images/aphorism\":{\"title\":\"$:/xp/images/aphorism\",\"tags\":\"$:/tags/Image\",\"text\":\"\\\\parameters (size:\\\"22pt\\\")\\n<svg width=<<size>> height=<<size>> viewBox=\\\"0 0 1024 1024\\\"><path d=\\\"M 512 896 c -59.796 0 -116.4 -13.668 -166.856 -38.048 C 313.956 842.88 153.796 950.56 128 928 c -31.176 -27.264 73.416 -186.332 52.368 -222.284 C 147.08 648.848 128 582.652 128 512 c 0 -212.08 171.92 -384 384 -384 s 384 171.92 384 384 s -171.92 384 -384 384 Z m -192 -256 v 64 h 384 v -64 H 320 Z m 165.808 -383.872 L 363.504 576 h 56 l 29.12 -80.192 h 133.952 l 29.12 80.192 h 56 l -122.304 -319.872 h -59.584 Z m -21.504 196.672 l 50.624 -140.224 h 1.792 l 50.176 140.224 h -102.592 Z\\\"/></svg>\"},\"$:/xp/aggregation-aphorism/styles\":{\"title\":\"$:/xp/aggregation-aphorism/styles\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\".xp-aphorism-edit-frame .tc-editor-toolbar {\\n    z-index: 499 !important;\\n}\\n\\n/*\\n** 弃用样式\\n\\n[data-tiddler-title=\\\"APHORISM\\\"] {\\n    background: <<colour page-background>>;\\n    border: 1px solid <<colour page-background>>;\\n    border-radius: 8px;\\n    <<box-shadow \\\"none\\\">>\\n}\\n\\n[data-tiddler-title=\\\"APHORISM\\\"] .tc-titlebar {\\n    background: <<colour page-background>>;\\n}\\n\\n.xp-aphorism > tbody > .xp-aphorism-item:first-child {\\n    border-top: 1px solid <<colour table-border>>;\\n}\\n\\n.xp-aphorism > tbody > .xp-aphorism-item:last-child {\\n    border-bottom: 1px solid <<colour table-border>>;\\n}\\n\\n.xp-aphorism-item {\\n    line-height: 1.2;\\n}\\n\\n.xp-aphorism-item p {\\n    text-indent: 2em;\\n}\\n\\n*/\\n\"},\"$:/templates/transclusion-aphorism-evenodd\":{\"title\":\"$:/templates/transclusion-aphorism-evenodd\",\"text\":\"\\\\whitespace trim\\n<div class=\\\"xp-aggregation-evenodd\\\" style=\\\"padding:5px;\\\">\\n\\n<span class=\\\"tc-tiddler-controls xp-aggregation-controls\\\">\\n<<starTiddlerButton>>\\n{{||$:/core/ui/Buttons/delete}}\\n{{||$:/core/ui/Buttons/edit}}\\n<$list filter=\\\"[all[current]!tag<aggregationTag>]\\\">{{||$:/core/ui/Buttons/close}}</$list>\\n</span>\\n\\n<$transclude mode=\\\"block\\\"><p>Missing tiddler.</p></$transclude>\\n\\n</div>\"},\"$:/templates/transclusion-aphorism\":{\"title\":\"$:/templates/transclusion-aphorism\",\"text\":\"\\\\whitespace trim\\n<div class={{{ [all[current]tag[Star]then[xp-aggregation-card-star]] ~[[xp-aggregation-card]] }}}>\\n\\n<span class=\\\"tc-tiddler-controls xp-aggregation-controls\\\">\\n<<starTiddlerButton>>\\n{{||$:/core/ui/Buttons/delete}}\\n{{||$:/core/ui/Buttons/edit}}\\n<$list filter=\\\"[all[current]!tag<aggregationTag>]\\\">{{||$:/core/ui/Buttons/close}}</$list>\\n</span>\\n\\n<div class=\\\"tc-tags-wrapper\\\" style=\\\"font-size:0.6em;\\\"><$list filter=\\\"[all[current]tags[]sort[]] -[<aggregationTag>]\\\" template=\\\"$:/core/ui/TagTemplate\\\" storyview=\\\"pop\\\"/></div>\\n\\n<$transclude mode=\\\"block\\\"><p>Missing tiddler.</p></$transclude>\\n\\n</div>\\n\"},\"$:/xp/aggregation-aphorism/ui/EditTemplate\":{\"title\":\"$:/xp/aggregation-aphorism/ui/EditTemplate\",\"code-body\":\"yes\",\"text\":\"\\\\define delete-edittemplate-state-tiddlers()\\n<$set name=\\\"safeNewFieldValueTiddlerPrefix\\\" value=<<newFieldValueTiddlerPrefix>> emptyValue=<<qualify \\\"$:/temp/NewFieldValue\\\">> >\\n\\t<$action-deletetiddler $filter=\\\"[<newFieldNameTiddler>] [prefix[$:/temp/NewFieldValue]prefix<safeNewFieldValueTiddlerPrefix>] [<newFieldNameInputTiddler>] [<newFieldNameSelectionTiddler>] [<newTagNameTiddler>] [<newTagNameInputTiddler>] [<newTagNameSelectionTiddler>] [<typeInputTiddler>] [<typeSelectionTiddler>]\\\"/>\\n</$set>\\n\\\\end\\n\\n<!-- Beware this is duplicated from fields.tid. For details see bug #7054 -->\\n\\\\define get-field-value-tiddler-filter() [subfilter<get-field-editor-filter>sha256[16]addprefix[/]addprefix<newFieldValueTiddlerPrefix>]\\n\\\\define get-field-editor-filter() [<newFieldNameTiddler>get[text]else[]] :cascade[all[shadows+tiddlers]tag[$:/tags/FieldEditorFilter]!is[draft]get[text]] :and[!is[blank]else{$:/core/ui/EditTemplate/fieldEditor/default}]\\n\\n\\\\define save-tiddler-actions()\\n\\\\whitespace trim\\n<$action-sendmessage $message=\\\"tm-add-tag\\\" $param={{{ [<newTagNameTiddler>get[text]] }}}/>\\n<$action-sendmessage $message=\\\"tm-add-field\\\" $name={{{ [<newFieldNameTiddler>get[text]] }}} $value={{{ [<newFieldNameTiddler>get[text]] :map[subfilter<get-field-value-tiddler-filter>get[text]] }}}/>\\n<<delete-edittemplate-state-tiddlers>>\\n<$action-sendmessage $message=\\\"tm-save-tiddler\\\"/>\\n\\\\end\\n\\n\\\\define cancel-delete-tiddler-actions(message)\\n\\\\whitespace trim\\n<<delete-edittemplate-state-tiddlers>>\\n<$action-sendmessage $message=\\\"tm-$message$-tiddler\\\"/>\\n\\\\end\\n\\n\\\\whitespace trim\\n<div\\n\\tdata-tiddler-title=<<currentTiddler>>\\n\\tdata-tags={{!!tags}}\\n\\tclass={{{ [all[shadows+tiddlers]tag[$:/tags/ClassFilters/TiddlerTemplate]!is[draft]] :map:flat[subfilter{!!text}] tc-tiddler-frame tc-tiddler-edit-frame [<currentTiddler>is[tiddler]then[tc-tiddler-exists]] [<currentTiddler>is[missing]!is[shadow]then[tc-tiddler-missing]] [<currentTiddler>is[shadow]then[tc-tiddler-exists tc-tiddler-shadow]] [<currentTiddler>is[system]then[tc-tiddler-system]] [{!!class}] [<currentTiddler>tags[]encodeuricomponent[]addprefix[tc-tagged-]] +[join[ ]] }}}\\n\\trole=\\\"region\\\"\\n\\taria-label={{$:/language/EditTemplate/Caption}}>\\n<$fieldmangler>\\n<$vars\\n\\tstoryTiddler=<<currentTiddler>>\\n\\tnewTagNameTiddler=<<qualify \\\"$:/temp/NewTagName\\\">>\\n\\tnewFieldNameTiddler=<<qualify \\\"$:/temp/NewFieldName\\\">>\\n\\tnewFieldValueTiddlerPrefix=<<qualify \\\"$:/temp/NewFieldValue\\\">>\\n\\tnewFieldNameInputTiddler=<<qualify \\\"$:/temp/NewFieldName/input\\\">>\\n\\tnewFieldNameSelectionTiddler=<<qualify \\\"$:/temp/NewFieldName/selected-item\\\">>\\n\\tnewTagNameInputTiddler=<<qualify \\\"$:/temp/NewTagName/input\\\">>\\n\\tnewTagNameSelectionTiddler=<<qualify \\\"$:/temp/NewTagName/selected-item\\\">>\\n\\ttypeInputTiddler=<<qualify \\\"$:/temp/Type/input\\\">>\\n\\ttypeSelectionTiddler=<<qualify \\\"$:/temp/Type/selected-item\\\">>>\\n<$keyboard key=\\\"((cancel-edit-tiddler))\\\" actions=<<cancel-delete-tiddler-actions \\\"cancel\\\">> tag=\\\"div\\\">\\n<$keyboard key=\\\"((save-tiddler))\\\" actions=<<save-tiddler-actions>> tag=\\\"div\\\">\\n<$list filter=\\\"$:/core/ui/EditTemplate/controls\\n$:/core/ui/EditTemplate/tags\\n$:/core/ui/EditTemplate/shadow\\n$:/core/ui/ViewTemplate/classic\\n$:/core/ui/EditTemplate/body\\n\\\" variable=\\\"listItem\\\">\\n<$transclude tiddler=<<listItem>>/>\\n</$list>\\n</$keyboard>\\n</$keyboard>\\n</$vars>\\n</$fieldmangler>\\n</div>\\n\"}}}"}