{"title":"$:/plugins/benwebber/checklist","name":"checklist","description":"Add simple checklists to tiddlers","author":"Ben Webber","version":"0.3.0","core-version":">=5.2.3","source":"https://github.com/benwebber/tiddlywiki-plugins","plugin-type":"plugin","list":"README","license":"MIT","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/benwebber/checklist/README\":{\"title\":\"$:/plugins/benwebber/checklist/README\",\"text\":\"''checklist'' adds a macro to render simple checklists.\\n\\n<$list filter=\\\"[variables[]match[twdoc.list-macros]]\\\" emptyMessage=\\\"Install [ext[twdoc|https://benwebber.github.io/tiddlywiki-plugins/#twdoc]] to view documentation.\\\">\\n<<twdoc.list-macros \\\"[all[shadows]tag[$:/tags/Macro]prefix[$:/plugins/benwebber/checklist/]]\\\">>\\n</$list>\\n\"},\"$:/plugins/benwebber/checklist/config/DefaultField\":{\"title\":\"$:/plugins/benwebber/checklist/config/DefaultField\",\"text\":\"checklist\"},\"$:/plugins/benwebber/checklist/config/DefaultDoneSuffix\":{\"title\":\"$:/plugins/benwebber/checklist/config/DefaultDoneSuffix\",\"text\":\".done\"},\"$:/plugins/benwebber/checklist/styles/static\":{\"text\":\".tw-invisible{visibility:hidden}.tw-m-0{margin:0}.tw-inline-block{display:inline-block}.tw-flex{display:flex}.tw-hidden{display:none}.tw-h-8{height:2rem}.tw-w-full{width:100%}.tw-flex-shrink-0{flex-shrink:0}.tw-flex-grow{flex-grow:1}.tw-resize-none{resize:none}.tw-list-none{list-style-type:none}.tw-items-start{align-items:flex-start}.tw-space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(.5rem*var(--tw-space-x-reverse));margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)))}.tw-border-0{border-width:0}.tw-border-solid{border-style:solid}.tw-p-0{padding:0}.tw-p-0\\\\.5{padding:.125rem}.tw-py-2{padding-top:.5rem;padding-bottom:.5rem}.tw-pt-0\\\\.5{padding-top:.125rem}.tw-pt-0{padding-top:0}.tw-pl-6{padding-left:1.5rem}.hover\\\\:-tw-my-\\\\[1px\\\\]:hover{margin-top:-1px;margin-bottom:-1px}.hover\\\\:tw-cursor-grab:hover{cursor:grab}.hover\\\\:tw-border-y:hover{border-top-width:1px;border-bottom-width:1px}.tw-group:hover .group-hover\\\\:tw-visible{visibility:visible}\",\"title\":\"$:/plugins/benwebber/checklist/styles/static\",\"type\":\"text/css\",\"tags\":\"$:/tags/Stylesheet\"},\"$:/plugins/benwebber/checklist/macros/private\":{\"title\":\"$:/plugins/benwebber/checklist/macros/private\",\"text\":\"\\\\define insertBefore()\\n<$action-listops $tiddler=<<tiddler>> $field=<<field>> $filter=\\\"[list<list>insertbefore<actionTiddler>,<item>]\\\" />\\n\\\\end\\n\\n\\\\define append()\\n<$action-listops $tiddler=<<tiddler>> $field=<<field>> $filter=\\\"[list<list>] [<actionTiddler>]\\\" />\\n\\\\end\\n\\n\\\\define remove()\\n<$action-listops $tiddler=<<tiddler>> $field=<<field>> $filter=\\\"[list<list>] -[<item>]\\\" />\\n\\\\end\\n\\n\\\\define show()\\n<$action-setfield $tiddler=<<newStateTiddler>> $field=\\\"text\\\" $value=\\\"true\\\" />\\n\\\\end\\n\\n\\\\define hide()\\n<$action-deletetiddler $tiddler=<<newStateTiddler>> />\\n\\\\end\\n\\n\\\\define add()\\n<$action-listops $tiddler=<<tiddler>> $field=<<field>> $subfilter=\\\"[<editStateTiddler>get[text]]\\\" />\\n<$action-deletetiddler $tiddler=<<editStateTiddler>> />\\n</$list>\\n\\\\end\\n\\n\\n\\\\define dragStateTiddler() $:/state/plugins/benwebber/checklist/$(tiddler)$/$(field)$/drag\\n\\\\define newStateTiddler() $:/state/plugins/benwebber/checklist/$(tiddler)$/$(field)$/new\\n\\\\define editStateTiddler() $:/state/plugins/benwebber/checklist/$(tiddler)$/$(field)$/edit\\n\\\\define list() $(tiddler)$!!$(field)$\\n\\\\define doneList() $(field)${{$:/plugins/benwebber/checklist/config/DefaultDoneSuffix}}\\n\\n<!-- Used to trap Shift+Enter and suppress line breaks in list items. -->\\n\\\\define noop() _\\n\"},\"$:/plugins/benwebber/checklist/macros/public\":{\"title\":\"$:/plugins/benwebber/checklist/macros/public\",\"tags\":\"$:/tags/Macro\",\"twdoc.description\":\"Render a checklist.\",\"twdoc.param.tiddler\":\"Optional title of the tiddler to modify. The default is the <<twdoc.ext \\\"Current Tiddler\\\" \\\"current tiddler\\\">>.\",\"twdoc.param.tiddler.optional\":\"true\",\"twdoc.param.field\":\"List field that represents the checklist. The default is <code>{{$:/plugins/benwebber/checklist/config/DefaultField}}</code>.\",\"twdoc.param.field.optional\":\"true\",\"twdoc.param.class\":\"Optional class to add to the checklist `<div>`.\",\"twdoc.param.class.optional\":\"true\",\"text\":\"\\\\define checklist(tiddler, field, class)\\n\\\\import [[$:/plugins/benwebber/checklist/macros/private]]\\n<$let\\n  tiddler={{{ [<__tiddler__>is[blank]then<currentTiddler>else<__tiddler__>] }}}\\n  defaultField={{$:/plugins/benwebber/checklist/config/DefaultField}}\\n  field={{{ [<__field__>is[blank]then<defaultField>else<__field__>] }}}\\n  list=<<list>>\\n  doneList={{{ [<field>addsuffix{$:/plugins/benwebber/checklist/config/DefaultDoneSuffix}] }}}\\n>\\n<div class={{{ [<__class__>] checklist +[!is[blank]join[ ]] }}}>\\n  <ul class=\\\"tw-p-0 tw-m-0\\\">\\n    <$list variable=\\\"item\\\" filter=\\\"[list<list>]\\\">\\n      {{$:/plugins/benwebber/checklist/templates/item}}\\n    </$list>\\n      <$reveal type=\\\"nomatch\\\" state=<<newStateTiddler>> text=\\\"\\\" tag=li class=\\\"checklist-item tw-list-none tw-group hover:tw-border-y tw-border-0 tw-border-solid hover:-tw-my-[1px]\\\">\\n        <div>\\n          <div class=\\\"tw-flex tw-space-x-2 checklist-item-row tw-p-0.5\\\">\\n            <div class=\\\"checklist-item-handle tw-flex-shrink-0 tw-pt-0.5 tw-invisible\\\">\\n              {{$:/core/images/menu-button}}\\n            </div>\\n            <div class=\\\"tw-flex-grow\\\">\\n              <div class=\\\"tw-flex tw-items-start\\\">\\n                <input type=\\\"checkbox\\\" disabled />\\n                <$keyboard actions=<<add>> key=enter class=\\\"tw-flex-grow tw-inline-block\\\">\\n                  <$keyboard actions=<<noop>> key=\\\"shift+enter\\\">\\n                    <$keyboard actions=<<hide>> key=escape>\\n                      <$edit-text tiddler=<<editStateTiddler>> default=\\\"\\\" class=\\\"tw-resize-none tw-w-full\\\" placeholder=\\\"\\\" focus=true minHeight=0 rows=1 />\\n                    </$keyboard>\\n                  </$keyboard>\\n                </$keyboard>\\n              </div>\\n            </div>\\n            <div class=\\\"tw-invisible tw-flex-shrink-0 group-hover:tw-visible tw-flex tw-space-x-2\\\">\\n              <$button actions=<<add>> class=\\\"tc-btn-invisible\\\" aria-label=\\\"Save\\\" tooltip=\\\"Save\\\">\\n                {{$:/core/images/done-button}}\\n              </$button>\\n              <$button actions=<<hide>> class=\\\"tc-btn-invisible\\\" aria-label=\\\"Cancel\\\" tooltip=\\\"Cancel\\\">\\n                {{$:/core/images/close-button}}\\n              </$button>\\n            </div>\\n          </div>\\n        </div>\\n      </$reveal>\\n  </ul>\\n  <$droppable actions=<<append>> tag=div>\\n    <$list filter=\\\"[title<dragStateTiddler>get[text]] -[list<list>last[]]\\\">\\n      <div class={{{ checklist-item-droppable-placeholder tw-h-8 tw-hidden +[join[ ]] }}} />\\n    </$list>\\n    <$reveal type=\\\"match\\\" state=<<newStateTiddler>> text=\\\"\\\" tag=div class=\\\"tw-pl-6 tw-py-2\\\">\\n      <$button actions=<<show>>>\\n        {{$:/core/images/new-button}} add\\n      </$button>\\n    </$reveal>\\n    <$reveal type=\\\"nomatch\\\" state=<<newStateTiddler>> text=\\\"\\\" tag=div class=\\\"tw-pl-6 tw-py-2\\\">\\n      <$button actions=<<hide>>>\\n        {{$:/core/images/done-button}} done\\n      </$button>\\n    </$reveal>\\n  </$droppable>\\n</div>\\n</$let>\\n\\\\end\\n\\n!! `checklist`\\n\\n\"},\"$:/plugins/benwebber/checklist/styles/dynamic\":{\"title\":\"$:/plugins/benwebber/checklist/styles/dynamic\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\".checklist-item:hover {\\n  border-color: <<colour \\\"muted-foreground\\\">>;\\n}\\n\\n.checklist-item-handle svg {\\n  height: 1em;\\n  width: 1em;\\n  vertical-align: middle;\\n  fill: <<colour \\\"muted-foreground\\\">>;\\n}\\n\\n.checklist .checklist-item button svg {\\n  fill: <<colour \\\"muted-foreground\\\">>;\\n}\\n\\n.checklist button:hover svg {\\n  fill: <<colour \\\"foreground\\\">>;\\n}\\n\\n.checklist-item input[type=\\\"checkbox\\\"] {\\n  margin: 4px;\\n  margin-left: 0;\\n}\\n\\n.checklist-item-label span {\\n  padding-left: 2px;\\n  padding-top: 2px;\\n}\\n\\n.checklist .tc-dragover .checklist-item-droppable-placeholder {\\n  display: block;\\n  background-color: <<colour \\\"tiddler-editor-background\\\">>;\\n}\\n\\n.checklist .tc-dragging .tc-dragover .checklist-item-droppable-placeholder,\\n.checklist .tc-dragging + li .checklist-item-droppable-placeholder {\\n  display: none;\\n}\\n\"},\"$:/plugins/benwebber/checklist/templates/item\":{\"title\":\"$:/plugins/benwebber/checklist/templates/item\",\"text\":\"\\\\define showInput()\\n<$action-setfield $tiddler=<<inputStateTiddler>> $field=\\\"text\\\" $value=<<item>> />\\n<$action-setfield $tiddler=<<showInputStateTiddler>> $field=\\\"text\\\" $value=\\\"true\\\" />\\n\\\\end\\n\\n\\\\define hideInput()\\n<$action-deletetiddler $tiddler=<<showInputStateTiddler>> />\\n<$action-deletetiddler $tiddler=<<inputStateTiddler>> />\\n\\\\end\\n\\n\\\\define saveInput()\\n<$list filter=\\\"[title<inputStateTiddler>get[text]!is[blank]]\\\">\\n<$list filter=\\\"[title<inputStateTiddler>get[text]] -[title<item>]\\\">\\n<$action-listops $tiddler=<<tiddler>> $field=<<field>> $filter=\\\"[list<list>] [<inputStateTiddler>get[text]] +[replace<item>]\\\" />\\n</$list>\\n<<hideInput>>\\n</$list>\\n\\\\end\\n\\n\\\\define cancelInput()\\n<<hideInput>>\\n\\\\end\\n\\n\\\\define startDrag()\\n<$action-setfield $tiddler=<<dragStateTiddler>> $field=\\\"text\\\" $value=<<item>> />\\n\\\\end\\n\\n\\\\define stopDrag()\\n<$action-deletetiddler $tiddler=<<dragStateTiddler>> />\\n\\\\end\\n\\n\\\\define inputStateTiddler() $:/state/plugins/benwebber/checklist/$(tiddler)$/$(field)$/$(item)$/input\\n\\\\define showInputStateTiddler() $:/state/plugins/benwebber/checklist/$(tiddler)$/$(field)$/$(item)$/showInput\\n\\n<$draggable\\n  tiddler=<<item>>\\n  selector=\\\".checklist-item-handle\\\"\\n  tag=li\\n  class=\\\"checklist-item tw-list-none tw-group hover:tw-border-y tw-border-0 tw-border-solid hover:-tw-my-[1px]\\\"\\n  startactions=<<startDrag>>\\n  endactions=<<stopDrag>>\\n>\\n  <$droppable actions=<<insertBefore>> tag=div>\\n    <div class=\\\"checklist-item-droppable-placeholder tw-h-8 tw-hidden\\\" />\\n      <div class=\\\"tw-flex tw-space-x-2 tw-p-0.5\\\">\\n      <div class=\\\"checklist-item-handle hover:tw-cursor-grab tw-flex-shrink-0 tw-pt-0.5 tw-invisible group-hover:tw-visible\\\" draggable=\\\"true\\\">\\n        {{$:/core/images/menu-button}}\\n      </div>\\n      <$reveal type=\\\"match\\\" state=<<showInputStateTiddler>> text=\\\"\\\" tag=div class=\\\"tw-flex-grow\\\">\\n        <$checkbox tiddler=<<tiddler>> listField=<<doneList>> checked=<<item>> class=\\\"tw-flex tw-items-start checklist-item-label\\\">\\n          <$list filter=\\\"[title<item>is[tiddler]]\\\">\\n            <$link to=<<item>> />\\n          </$list>\\n          <$list filter=\\\"[title<item>!is[tiddler]]\\\">\\n            <<item>>\\n          </$list>\\n        </$checkbox>\\n      </$reveal>\\n      <$reveal type=\\\"nomatch\\\" state=<<showInputStateTiddler>> text=\\\"\\\" tag=div class=\\\"tw-flex-grow\\\">\\n        <div class=\\\"tw-flex tw-items-start\\\">\\n          <input type=\\\"checkbox\\\" disabled />\\n          <$keyboard actions=<<saveInput>> key=enter class=\\\"tw-flex-grow tw-inline-block\\\">\\n            <$keyboard actions=<<noop>> key=\\\"shift+enter\\\">\\n              <$keyboard actions=<<cancelInput>> key=escape>\\n                <$edit-text tiddler=<<inputStateTiddler>> default=\\\"\\\" class=\\\"tw-resize-none tw-w-full\\\" placeholder=\\\"\\\" focus=true minHeight=0 rows=1 />\\n              </$keyboard>\\n            </$keyboard>\\n          </$keyboard>\\n        </div>\\n      </$reveal>\\n      <$reveal type=\\\"match\\\" state=<<showInputStateTiddler>> text=\\\"\\\" tag=div class=\\\"tw-invisible tw-flex-shrink-0 group-hover:tw-visible tw-flex tw-space-x-2\\\">\\n        <$button actions=<<showInput>> class=\\\"tc-btn-invisible\\\" aria-label=\\\"Edit\\\" tooltip=\\\"Edit\\\">\\n          {{$:/core/images/edit-button}}\\n        </$button>\\n        <$button actions=<<remove>> class=\\\"tc-btn-invisible\\\" aria-label=\\\"Delete\\\" tooltip=\\\"Delete\\\">\\n          {{$:/core/images/delete-button}}\\n        </$button>\\n      </$reveal>\\n      <$reveal type=\\\"nomatch\\\" state=<<showInputStateTiddler>> text=\\\"\\\" tag=div class=\\\"tw-invisible tw-flex-shrink-0 group-hover:tw-visible tw-flex tw-space-x-2\\\">\\n        <$button actions=<<saveInput>> class=\\\"tc-btn-invisible\\\" aria-label=\\\"Save\\\" tooltip=\\\"Save\\\">\\n          {{$:/core/images/done-button}}\\n        </$button>\\n        <$button actions=<<cancelInput>> class=\\\"tc-btn-invisible\\\" aria-label=\\\"Cancel\\\" tooltip=\\\"Cancel\\\">\\n          {{$:/core/images/close-button}}\\n        </$button>\\n      </$reveal>\\n    </div>\\n  </$droppable>\\n</$draggable>\\n\"}}}"}